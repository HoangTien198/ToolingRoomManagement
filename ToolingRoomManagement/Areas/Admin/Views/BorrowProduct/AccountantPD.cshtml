
@{
    ViewBag.Title = "AccountantPD";
    Layout = "~/Areas/Admin/Views/Shared/_Layout_Borrow.cshtml";
    var session = (ToolingRoomManagement.Common.UserLogin)Session[ToolingRoomManagement.Common.CommonConstants.USER_SESSION];
}

<link href="~/Assets/admin/bootstrap-select.css" rel="stylesheet" />
@*<script src="~/Assets/client/vendor/jquery/jquery.min.js"></script>*@
<script src="/Assets/admin/js/vendor/jquery-1.12.4.min.js"></script>
<script src="/Assets/admin/bootstrap-select.js"></script>
<style>
    @@media (min-width: 900px) {
        .modal-sm {
            width: 900px;
        }
    }

    @@media (min-width: 900px) {
        .modal-content {
            -webkit-box-shadow: 0 5px 15px rgba(0,0,0,.5);
            box-shadow: 0 5px 15px rgba(0,0,0,.5);
        }
    }

    .tblCreate thead tr th {
        text-align: center;
    }

    .tblCreate tbody tr td {
        text-align: center;
    }

    .project-list {
        display: -webkit-box;
        display: flex;
        flex-wrap: wrap;
        padding-bottom: 3rem;
    }

    .project-item {
        width: 33.333%;
        padding: .5rem;
        -webkit-transition: 400ms ease;
        transition: 400ms ease;
    }

        .project-item .item-inner {
            padding-bottom: 0;
            border-radius: 5px;
            background: #152036;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.32);
            -webkit-transition: 400ms;
            transition: 400ms;
        }

    .item-inner .content {
        padding: 1.5rem;
    }

        .item-inner .content h3 {
            margin-top: 0;
            color: #84bf7d;
        }

        .item-inner .content p {
            margin-bottom: 1rem;
            color: #ecece7;
        }

    .item-inner .item-footer {
        display: flex;
        -webkit-box-pack: justify;
        justify-content: space-between;
        padding: .75rem;
        padding-bottom: .25rem;
        background: #1c2f52;
        border-top: 1px solid #ddd;
        color: #f3ebeb;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
    }


        .item-inner .item-footer .item-person {
            position: relative;
            top: -4px;
        }

            .item-inner .item-footer .item-person img {
                height: 1.75rem;
                width: 1.75rem;
                border-radius: 50%;
            }

            .item-inner .item-footer .item-person span {
                margin-left: .5rem;
            }

        .item-inner .item-footer .date {
            position: relative;
            top: 3px;
            margin: 0;
        }

            .item-inner .item-footer .date h5 {
                margin: 0;
            }

    .zoom {
        transition: transform .5s;
    }

        .zoom:hover {
            transform: scale(1.1); /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
        }

    #tbl_View {
        color: white;
    }

        #tbl_View thead {
            position: sticky;
            top: -3px;
            font-size: 1.3vh;
            background: #1b2a47;
        }

            #tbl_View thead tr th {
                text-align: center;
            }

        #tbl_View tbody tr td {
            font-size: 1vh;
            color: white;
            text-align: center;
        }
            #tbl_View tbody tr td a {
                font-size: 1.5vh;
                color: #7ebaed;
            }
    #tbl_View1 tbody tr td a {
        font-size: 1.5vh;
        color: #7ebaed;
    }
    #tbl_View2 tbody tr td a {
        font-size: 1.5vh;
        color: #7ebaed;
    }

    #tbl_View1 {
        color: white;
        
    }

        #tbl_View1 thead {
            position: sticky;
            top: -3px;
            font-size: 1.3vh;
            background: #1b2a47;
        }

            #tbl_View1 thead tr th {
                text-align: center;
            }

        #tbl_View1 tbody tr td {
            font-size: 1vh;
            color: white;
            text-align: center;
        }
           

    #tbl_View2 {
        color: white;
    }

        #tbl_View2 thead {
            position: sticky;
            top: -3px;
            font-size: 1.3vh;
            background: #1b2a47;
        }

            #tbl_View2 thead tr th {
                text-align: center;
            }

        #tbl_View2 tbody tr td {
            font-size: 1vh;
            color: white;
            text-align: center;
        }
           

    ::-webkit-scrollbar {
        width: 8px;
        height: 5px;
    }

    ::-webkit-scrollbar-thumb {
        -webkit-box-shadow: inset 0 0 4px 9px rgba(0,0,0,0.3);
        border-radius: 10px;
    }

    .load_section {
        animation: animateLoad 10s linear infinite;
    }

        .load_section .loader {
            position: relative;
            width: 5vw;
            height: 5vh;
            margin-top: 30vh;
            margin-left: 38vw;
        }

            .load_section .loader .span_loader {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                transform: rotate(calc(18deg * var(--i)));
            }

                .load_section .loader .span_loader::before {
                    content: '';
                    position: absolute;
                    border-radius: 20px;
                    top: 0;
                    left: 0;
                    width: 10px;
                    height: 10px;
                    background: #ffc107;
                    box-shadow: 0 0 10px #ffc107, 0 0 20px #ffc107, 0 0 40px #ffc107, 0 0 60px #ffc107, 0 0 80px #007bff, 0 0 100px #007bff;
                    animation: animateChild 1s linear infinite;
                    animation-delay: calc(0.05s * var(--i));
                }

    @@keyframes animateLoad {
        0% {
            filter: hue-rotate(0deg);
        }

        100% {
            filter: hue-rotate(360deg);
        }
    }

    @@keyframes animateChild {
        0% {
            transform: scale(1);
        }

        80%,100% {
            transform: scale(0);
        }
    }

    #tblBack tr td {
        text-align: center;
    }

    #table_View_Back tbody tr td {
        word-break: break-all;
    }

    #table_View_Back thead tr th {
        background: wheat;
        position: sticky;
        top: -3px;
    }

    .tableAdd thead tr th {
        text-align: center;
    }

    .tableAdd tbody tr td {
        text-align: center;
    }

    #tblView thead tr th {
        text-align: center;
    }

    #tbodyView tr td {
        text-align: center;
    }
</style>
<div class="header-advance-area">
    <div class="breadcome-area" style=" margin-top: 40px;">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="breadcome-list">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <div class="breadcomb-wp">
                                    <div class="breadcomb-icon zoom" data-toggle="tooltip" data-placement="bottom" title="Home">
                                        <a href="/Admin/BorrowProduct/AccountantPD">
                                            <i class="icon nalika-home"></i>
                                        </a>
                                    </div>
                                    <div class="breadcomb-ctn">
                                        <h2>Mượn bản</h2>
                                        <p>Welcome to <span class="bread-ntd">Website</span></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <div class="breadcomb-report">
                                    <button data-toggle="tooltip" data-placement="left" title="Download Report" class="btn"><i class="icon nalika-download"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="product-sales-area mg-tb-30" style="">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="product-sales-chart">
                    <div class="portlet-title">
                        <div class="row">
                            <div class="content">
                                <div class="" style="">
                                    <div class="project-list" style="height: 66vh;overflow:auto;width:100%;">
                                        <div style="width:100%;">
                                            <div class="ng-isolate-scope" style="float:left;width: 25%;border-radius: 5px;">
                                                <div style="width: 35%;float:left;">
                                                    <select id="select_shift" style="height: 28px;color: white;width: 100%;padding-left: 15px; border-radius: 5px;background: #152036;font-size:1.5vh;">
                                                        <option value="1">Ca ngày</option>
                                                        <option value="2">Ca đêm</option>
                                                        <option value="3">Ca đêm OBA</option>
                                                        <option value="4">NVIDIA</option>
                                                    </select>
                                                </div>
                                                <div style="width: 60%;float:right;">
                                                    <select id="select_status" style="height: 28px;color: white;width: 100%;padding-left: 15px; border-radius: 5px;background: #152036;font-size:1.5vh;">
                                                        <option value="100">Đơn chờ kí</option>
                                                        <option value="1">Đơn đã kí</option>
                                                        <option value="2">Đơn đã reject</option>
                                                        <option value="3">Đơn chưa hoàn tất</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-md-7 col-sm-6 col-xs-12" style="float:right;width: 300px;margin-right:25px;">
                                                <div class="header-top-menu tabl-d-n hd-search-rp">
                                                    <div class="breadcome-heading" style="margin: 0px 0px 10px 0px;">
                                                        <form role="search" class="">
                                                            <input id="input_search" type="text" placeholder="Search..." class="form-control" style="width: 283px;color: #fffaf0;height: 39px;" />
                                                            <a href="" style="left: 257px;margin-top: -23px;"><i class="fa fa-search"></i></a>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div style="height: 62vh;overflow:auto;width:100%;">
                                            <table class="table table-bordered" id="tbl_View">
                                                <thead>
                                                    <tr>
                                                        <th rowspan="2" style="width:3%;">#</th>
                                                        <th rowspan="2" style="width:5%;">Mã đơn</th>
                                                        <th rowspan="2" style="width:4%;">Trạng thái</th>
                                                        <th rowspan="2" style="width:4%;">Ngày mượn</th>
                                                        <th rowspan="2" style="width:4%;">Ngày trả</th>
                                                        <th rowspan="1" colspan="3">Người tạo</th>
                                                        <th rowspan="1" colspan="3">Quản lý</th>
                                                        <th rowspan="1" colspan="3">Kế toán PD</th>
                                                        <th rowspan="1" colspan="3">Quản lý PD 1</th>
                                                        <th rowspan="1" colspan="3">Quản lý PD 2</th>
                                                        <th rowspan="1" colspan="3">Leader Kế toán</th>
                                                        <th rowspan="1" colspan="3">Ngày trả</th>
                                                    </tr>
                                                    <tr>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày tạo</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:4%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do Reject</th>
                                                        <th colspan="1" style="width:4%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do Reject</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do Reject</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do Reject</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do Reject</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do Reject</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbd_View"></tbody>
                                            </table>
                                            <table class="table table-bordered" id="tbl_View2" style="display:none;">
                                                <thead>
                                                    <tr>
                                                        <th rowspan="2" style="width:3%;">#</th>
                                                        <th rowspan="2" style="width:5%;">Mã đơn</th>
                                                        <th rowspan="2" style="width:4%;">Trạng thái</th>
                                                        <th rowspan="2" style="width:4%;">Ngày mượn</th>
                                                        <th rowspan="2" style="width:4%;">Ngày trả</th>
                                                        <th rowspan="1" colspan="3">Người tạo</th>
                                                        <th rowspan="1" colspan="3">Quản lý BP</th>
                                                        <th rowspan="1" colspan="3">Tổ trưởng ca đêm(Mượn)</th>
                                                        <th rowspan="1" colspan="3">Tổ trưởng ca đêm(Trả)</th>
                                                        <th rowspan="1" colspan="3">Kế toán PD</th>
                                                    </tr>
                                                    <tr>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày tạo</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:4%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:4%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbd_View2"></tbody>
                                            </table>
                                            <table class="table table-bordered" id="tbl_View1" style="display:none;">
                                                <thead>
                                                    <tr>
                                                        <th rowspan="2" style="width:3%;">#</th>
                                                        <th rowspan="2" style="width:5%;">Mã đơn</th>
                                                        <th rowspan="2" style="width:4%;">Trạng thái</th>
                                                        <th rowspan="2" style="width:4%;">Ngày mượn</th>
                                                        <th rowspan="2" style="width:4%;">Ngày trả</th>
                                                        <th rowspan="1" colspan="3">Người tạo</th>
                                                        <th rowspan="1" colspan="3">Quản lý BP</th>
                                                        <th rowspan="1" colspan="3">Tổ trưởng ca đêm</th>
                                                        <th rowspan="1" colspan="3">Kế toán PD</th>
                                                        <th rowspan="1" colspan="3">Quản lý PD 1</th>
                                                        <th rowspan="1" colspan="3">Quản lý PD 2</th>
                                                        <th rowspan="1" colspan="3">Leader Kế toán</th>
                                                        <th rowspan="1" colspan="3">Trả bản</th>
                                                    </tr>
                                                    <tr>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày tạo</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:4%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:4%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                        <th colspan="1" style="width:5%;">Tên</th>
                                                        <th colspan="1" style="width:5%;">Ngày kí</th>
                                                        <th colspan="1" style="width:5%;">Lý do</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbd_View1"></tbody>
                                            </table>
                                            <section class="load_section" style="height: 60vh;width: 100%;">
                                                <div class="loader">
                                                    <span class="span_loader" style="--i:1;"></span>
                                                    <span class="span_loader" style="--i:2;"></span>
                                                    <span class="span_loader" style="--i:3;"></span>
                                                    <span class="span_loader" style="--i:4;"></span>
                                                    <span class="span_loader" style="--i:5;"></span>
                                                    <span class="span_loader" style="--i:6;"></span>
                                                    <span class="span_loader" style="--i:7;"></span>
                                                    <span class="span_loader" style="--i:8;"></span>
                                                    <span class="span_loader" style="--i:9;"></span>
                                                    <span class="span_loader" style="--i:10;"></span>
                                                    <span class="span_loader" style="--i:11;"></span>
                                                    <span class="span_loader" style="--i:12;"></span>
                                                    <span class="span_loader" style="--i:13;"></span>
                                                    <span class="span_loader" style="--i:14;"></span>
                                                    <span class="span_loader" style="--i:15;"></span>
                                                    <span class="span_loader" style="--i:16;"></span>
                                                    <span class="span_loader" style="--i:17;"></span>
                                                    <span class="span_loader" style="--i:18;"></span>
                                                    <span class="span_loader" style="--i:19;"></span>
                                                    <span class="span_loader" style="--i:20;"></span>
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="ModalOrder">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Detail</h4>
                <button type="button" class="close" data-dismiss="modal" onclick="closeModal()">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <input hidden id="order_id" />
                <div style="max-height:65vh;overflow:auto;">
                    <a style="width:20vw;float:left;">Code order: <h5 id="code_order" style="width: 16vw; float: right;margin-top: 4px;"></h5></a>
                    <table class="" style="border: 0;width: 78%;margin-left: 22%;" id="tblView">
                        <tr>
                            <td>Mã thẻ: </td>
                            <td id="employeeID" style="height:35px; width:70%; font-weight:normal; font-size:0.875rem;"></td>
                        </tr>
                        <tr>
                            <td>Họ tên: </td>
                            <td id="fullname" style="height:35px; width:70%; font-weight:normal; font-size:0.875rem;"></td>
                        </tr>
                        <tr>
                            <td>Ngày mượn: </td>
                            <td><input type="date" id="dateBorrow" disabled class="form-control" style="background: white; color: black;width: 15vw;margin: 2px 0px;border: 1px solid gray;border-radius: 10px;" /></td>
                        </tr>
                        <tr>
                            <td>Ngày trả: </td>
                            <td><input type="date" id="dateReturn" disabled class="form-control" style="background: white; color: black;width: 15vw;margin: 2px 0px;border: 1px solid gray;border-radius: 10px;" /></td>
                        </tr>
                        <tr>
                            <td style="font-size:16px">Ghi chú: </td>
                            <td><textarea id="noteOrder" disabled style="background: white; color: black;width: 15vw;margin: 2px 0px;border: 1px solid gray;border-radius: 10px;height:5vh"></textarea></td>
                        </tr>
                        <tr>
                            <td style="font-size:16px">Quản lý bộ phận: </td>
                            <td>
                                <select id="managerUs" disabled class="form-control" style="background: white; color: black;width: 15vw;margin: 2px 0px;border: 1px solid gray;border-radius: 10px;">
                                    <option value="0">Chọn quản lý</option>
                                    <option value="1008">F1311018-Attila</option>
                                    <option value="1007">F1313690-Tommy</option>
                                    <option value="1022">F6820701-XIA BIN JUN</option>
                                    <option value="1108">F6822215-TANG SHAO CHUN</option>
                                    <option value="1110">810097-KUO CHENG KUO</option>
                                    <option value="1113">F6817866-HE JI YU</option>
                                    <option value="2162">829994-Jay</option>
                                    <option value="2127">V0963405-Nguyễn Thế Hoàng</option>
                                    <option value="2136">V0907769-Nguyễn Đức Thịnh</option>
                                    <option value="2138">V0963410-Vũ Xuân Long</option>
                                    <option value="2139">V0907260-Nguyễn Đức Hội</option>
                                    <option value="2147">V0938762-Trần Danh Hà</option>
                                    <option value="2148">V0957329-Nguyễn Công Minh</option>
                                    <option value="2163">V0913254-Dương Minh Thái</option>
                                    <option value="1014">V0923827-Nguyễn Khắc Sáng</option>
                                    <option value="2176">V0901964-Nguyễn Văn Tuấn</option>
                                    <option value="3182">V0915975-Bùi Văn Mạnh</option>
                                </select>
                            </td>
                        </tr>
                    </table>
                    <table class="table table-bordered" style="margin-bottom:unset;margin-top:10px">
                        <thead>
                            <tr>
                                <th style="font-size:11px; padding: 0.75rem; width:5%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="2">#</th>
                                <th style="font-size:11px; padding: 0.75rem; width:25%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="2">Tên bản</th>
                                <th style="font-size:11px; padding: 0.75rem; width:25%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="2">SN</th>
                                <th style="font-size:11px; padding: 0.75rem; width:10%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="2">Số lượng</th>
                                <th style="font-size:11px; padding: 0.75rem; width:19%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="2">Line</th>
                                <th style="font-size:11px; padding: 0.75rem; width:19%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="1" colspan="2">Tuyến trưởng</th>
                                <th style="font-size:11px; padding: 0.75rem; width:16%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="2">Trạng thái</th>
                            </tr>
                            <tr>
                                <th style="font-size:11px; padding: 0.75rem; width:19%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="1">Mã thẻ</th>
                                <th style="font-size:11px; padding: 0.75rem; width:19%; color:black; background-color:rgb(230,230,230); text-align:center" rowspan="1">Họ tên</th>
                            </tr>
                        </thead>
                        <tbody id="tbodyView"></tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btnRejectBack" onclick="rejectReturnModel()" style="background: red;color: white;">Trả về</button>
                <button type="button" class="btn btn-secondary btnReject" onclick="rejectModel()" style="background: red;color: white;">Trả về</button>
                <button type="button" class="btn btn-secondary btnConfirm" onclick="confirmOrder()" style="background: green;color: white;">Xác nhận</button>
                <button type="button" class="btn btn-secondary btnConfirmReturn" onclick="confirmReturn()" style="background: green;color: white;">Nhận bản</button>
                <button type="button" class="btn btn-secondary btnConfirmReturnOBA" onclick="confirmReturnOBA()" style="background: green;color: white;">Nhận bản</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="myModalReject" style="background:#1f1d1d91">
    <div class="modal-dialog modal-sm" style="">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Lý do trả đơn</h4>
                <button type="button" class="close" data-dismiss="modal" onclick="closeRejectModel()">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <input hidden id="id_order" />
                <textarea class="form-control" id="note_reject" style="color: #000;border-radius: 11px; margin-left: 100px;width: 80%;background: aliceblue; height: 80px;border: 1px solid #d4abab;"></textarea>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" style="background: red;color: white;" class="btn btn-secondary btnreject1" onclick="rejectOrder()">Submit</button>
                <button type="button" style="background: red;color: white;" class="btn btn-secondary btnrejectReturn" onclick="rejectReturn()">Submit</button>
                <button type="button" style="background: red;color: white;" class="btn btn-secondary btnrejectReturnOBA" onclick="rejectReturnOBA()">Submit</button>
            </div>

        </div>
    </div>
</div>
<script src="/Assets/admin/js/vendor/jquery-1.12.4.min.js"></script>
<script>
    $(document).ready(function () {
        $("#load_section").show();
        $(".btnReject").show();
        $(".btnreject1").show();
        $(".btnrejectReturn").hide();
        $(".btnRejectBack").hide();
        $(".btnConfirm").show();
        loadData(100, 1)
    });
    var modal = document.getElementById("ModalOrder");
    var modelReject = document.getElementById("myModalReject");
    function closeModal() {
        modal.style.display = "none";
    }
    function closeRejectModel() {
        modelReject.style.display = "none";
    }
    function reloadPage() {
        location.reload();
    }

    
    $("#select_status").change(function () {

        $(".load_section").show();
        $("#tbd_View").hide();
        var number = $("#select_status").val();
        var shift = $("#select_shift").val();
        loadData(number, shift)
    })

    //#region onchange cua chi Ban
    //$("#select_shift").change(function () {
    //    $(".load_section").show();
    //    $("#tbd_View").hide();
    //    var number = $("#select_status").val();
    //    var shift = $("#select_shift").val();
    //    loadData(number, shift);
    //})
    //#endregion

    //#region onchange sua ngay 2023-05-25:
    $("#select_shift").change(function () {
        $("#tbd_View1").empty();
        $(".load_section").show();
        var number = $("#select_status").val();
        var shift = $("#select_shift").val();
        loadData(number, shift);
    })
    //#endregion

    //#region ham loadData cua chị Ban
    //function loadData(number, shift) {
    //    $("#load_section").show();
    //    $.ajax({
    //        type: "Post",
    //        url: "/GetData/listOrderByAccountantPD?number=" + number + "&shift=" + shift,
    //        async: false,
    //        contentType: false,
    //        processData: false,
    //        success: function (data) {
    //            var row = "";
    //            $("#tbd_View").empty();
    //            if (data != "") {
    //                if (JSON.parse(data).length > 0) {
    //                    for (i = 0; i < JSON.parse(data).length; i++) {
    //                        var status = "";
    //                        if (JSON.parse(data)[i].type_order == 1) {
    //                            if (JSON.parse(data)[i].status == 1) {
    //                                status = '<a style="color:orange">Đợi QLy BP</a>';
    //                            } else if (JSON.parse(data)[i].status == 2) {
    //                                status = '<a style="color:yellow">Đợi kế toán PD</a>';
    //                            } else if (JSON.parse(data)[i].status == 3) {
    //                                status = '<a style="color:#d4b6ef">Đợi QLy PD2</a>';
    //                            } else if (JSON.parse(data)[i].status == 4) {
    //                                status = '<a style="color:#8500ff">Đợi Tổ trưởng PD</a>';
    //                            } else if (JSON.parse(data)[i].status == 5) {
    //                                status = '<a style="color:red">Từ chối đơn mượn</a>';
    //                            } else if (JSON.parse(data)[i].status == 6) {
    //                                status = '<a style="color:#7df1f1">Đã mượn</a>';
    //                            } else if (JSON.parse(data)[i].status == 7) {
    //                                status = '<a style="color:#e98e73">Đợi xác nhận đơn trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 8) {
    //                                status = '<a style="color:green">Đã trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 9) {
    //                                status = '<a style="color:red">Từ chối dơn trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 10) {
    //                                status = '<a style="color:red">Chưa trả hết</a>';
    //                            } else if (JSON.parse(data)[i].status == 11) {
    //                                status = '<a style="color:red">Đợi QLy PD 1</a>';
    //                            } else if (JSON.parse(data)[i].status == 12) {
    //                                status = '<a style="color:orange">Đợi tổ trưởng</a>';
    //                            }
    //                            row += '<tr>' +
    //                                '<td>' + (i + 1) + '</td>' +
    //                                '<td><a onclick="detailOrder(' + "'" + JSON.parse(data)[i].id + "','" + JSON.parse(data)[i].codeOrder + "','" + JSON.parse(data)[i].status + "','" + JSON.parse(data)[i].create_by + "','" + convert_date2(JSON.parse(data)[i].date_borrow) + "','" + convert_date2(JSON.parse(data)[i].date_return) + "','" + (JSON.parse(data)[i].note != null ? StringToHex(JSON.parse(data)[i].note.replace("\n", " ").replace("\r", " ")) : "") + "','" + JSON.parse(data)[i].managerUs_id + "','" + JSON.parse(data)[i].type_order + "'" + ')">' + JSON.parse(data)[i].codeOrder + '</td>' +
    //                                '<td>' + status + '</td>' +
    //                               '<td>' + (JSON.parse(data)[i].date_borrow != null ? convert_date2(JSON.parse(data)[i].date_borrow) : "") + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].date_return != null ? convert_date2(JSON.parse(data)[i].date_return) : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].create_by + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].date_borrow != null ? convert_date2(JSON.parse(data)[i].create_date) : "") + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].note != null ? JSON.parse(data)[i].note : "") + '</td>' +
    //                                 '<td>' + JSON.parse(data)[i].managerUs_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_managerUs_cf != null ? convert_date2(JSON.parse(data)[i].time_managerUs_cf) : "") + '</td>' +
    //                                '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_Manager != null ? JSON.parse(data)[i].note_Manager : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].accountantPD_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_accountantPD_cf != null ? convert_date2(JSON.parse(data)[i].time_accountantPD_cf) : "") + '</td>' +
    //                                '<td style="color:#ff0018 ;">' + (JSON.parse(data)[i].note_accountantPD != null ? JSON.parse(data)[i].note_accountantPD : "") + '</td>' +
    //                                 '<td>' + JSON.parse(data)[i].aKhanh_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_aKhanh_cf != null ? convert_date2(JSON.parse(data)[i].time_aKhanh_cf) : "") + '</td>' +
    //                                '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_aKhanh != null ? JSON.parse(data)[i].note_aKhanh : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].managerPD_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_managerPD_cf != null ? convert_date2(JSON.parse(data)[i].time_managerPD_cf) : "") + '</td>' +
    //                                 '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_managerPD != null ? JSON.parse(data)[i].note_managerPD : "") + '</td>' +
    //                                 '<td>' + JSON.parse(data)[i].aTin_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_aTin_cf != null ? convert_date2(JSON.parse(data)[i].time_aTin_cf) : "") + '</td>' +
    //                                 '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_aTin != null ? JSON.parse(data)[i].note_aTin : "") + '</td>' +
    //                                 '<td>' + JSON.parse(data)[i].accountantPDBack_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_accountantPDBack_cf != null ? convert_date2(JSON.parse(data)[i].time_accountantPDBack_cf) : "") + '</td>' +
    //                                 '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_back_accountantPD != null ? JSON.parse(data)[i].note_back_accountantPD : "") + '</td>' +
    //                                '</tr>';
    //                        } else if (JSON.parse(data)[i].type_order == 2) {
    //                            if (JSON.parse(data)[i].status == 1) {
    //                                status = '<a style="color:orange">Đợi QLy BP</a>';
    //                            } else if (JSON.parse(data)[i].status == 2) {
    //                                status = '<a style="color:yellow">Đợi kế toán PD</a>';
    //                            } else if (JSON.parse(data)[i].status == 3) {
    //                                status = '<a style="color:#d4b6ef">Đợi QLy PD2</a>';
    //                            } else if (JSON.parse(data)[i].status == 4) {
    //                                status = '<a style="color:#8500ff">Đợi Tổ trưởng PD</a>';
    //                            } else if (JSON.parse(data)[i].status == 5) {
    //                                status = '<a style="color:red">Từ chối đơn mượn</a>';
    //                            } else if (JSON.parse(data)[i].status == 6) {
    //                                status = '<a style="color:#7df1f1">Đã mượn</a>';
    //                            } else if (JSON.parse(data)[i].status == 7) {
    //                                status = '<a style="color:#e98e73">Đợi xác nhận đơn trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 8) {
    //                                status = '<a style="color:green">Đã trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 9) {
    //                                status = '<a style="color:red">Từ chối dơn trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 10) {
    //                                status = '<a style="color:red">Chưa trả hết</a>';
    //                            } else if (JSON.parse(data)[i].status == 11) {
    //                                status = '<a style="color:red">Đợi QLy PD 1</a>';
    //                            } else if (JSON.parse(data)[i].status == 12) {
    //                                status = '<a style="color:orange">Đợi tổ trưởng</a>';
    //                            }
    //                            row += '<tr>' +
    //                                '<td>' + (i + 1) + '</td>' +
    //                                '<td><a onclick="detailOrder(' + "'" + JSON.parse(data)[i].id + "','" + JSON.parse(data)[i].codeOrder + "','" + JSON.parse(data)[i].status + "','" + JSON.parse(data)[i].create_by + "','" + convert_date2(JSON.parse(data)[i].date_borrow) + "','" + convert_date2(JSON.parse(data)[i].date_return) + "','" + (JSON.parse(data)[i].note != null ? StringToHex(JSON.parse(data)[i].note) : "") + "','" + JSON.parse(data)[i].managerUs_id + "','" + JSON.parse(data)[i].type_order + "'" + ')">' + JSON.parse(data)[i].codeOrder + '</td>' +
    //                                '<td>' + status + '</td>' +
    //                               '<td>' + (JSON.parse(data)[i].date_borrow != null ? convert_date2(JSON.parse(data)[i].date_borrow) : "") + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].date_return != null ? convert_date2(JSON.parse(data)[i].date_return) : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].create_by + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].date_borrow != null ? convert_date2(JSON.parse(data)[i].create_date) : "") + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].note != null ? JSON.parse(data)[i].note : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].managerUs_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_managerUs_cf != null ? convert_date2(JSON.parse(data)[i].time_managerUs_cf) : "") + '</td>' +
    //                                '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_Manager != null ? JSON.parse(data)[i].note_Manager : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].leaderNightShift_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_leaderNightShift_cf != null ? convert_date2(JSON.parse(data)[i].time_leaderNightShift_cf) : "") + '</td>' +
    //                                '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_leaderNightShift != null ? JSON.parse(data)[i].note_leaderNightShift : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].accountantPD_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_accountantPD_cf != null ? convert_date2(JSON.parse(data)[i].time_accountantPD_cf) : "") + '</td>' +
    //                                '<td style="color:#ff0018 ;">' + (JSON.parse(data)[i].note_accountantPD != null ? JSON.parse(data)[i].note_accountantPD : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].aKhanh_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_aKhanh_cf != null ? convert_date2(JSON.parse(data)[i].time_aKhanh_cf) : "") + '</td>' +
    //                                '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_aKhanh != null ? JSON.parse(data)[i].note_aKhanh : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].managerPD_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_managerPD_cf != null ? convert_date2(JSON.parse(data)[i].time_managerPD_cf) : "") + '</td>' +
    //                                 '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_managerPD != null ? JSON.parse(data)[i].note_managerPD : "") + '</td>' +
    //                                 '<td>' + JSON.parse(data)[i].aTin_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_aTin_cf != null ? convert_date2(JSON.parse(data)[i].time_aTin_cf) : "") + '</td>' +
    //                                 '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_aTin != null ? JSON.parse(data)[i].note_aTin : "") + '</td>' +
    //                                 '<td>' + JSON.parse(data)[i].accountantPDBack_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_accountantPDBack_cf != null ? convert_date2(JSON.parse(data)[i].time_accountantPDBack_cf) : "") + '</td>' +
    //                                 '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_back_accountantPD != null ? JSON.parse(data)[i].note_back_accountantPD : "") + '</td>' +
    //                                '</tr>';
    //                        } else if (JSON.parse(data)[i].type_order == 3) {
    //                            if (JSON.parse(data)[i].status == 1) {
    //                                status = '<a style="color:orange">Đợi QLy BP</a>';
    //                            } else if (JSON.parse(data)[i].status == 12) {
    //                                status = '<a style="color:yellow">Đợi tổ trưởng</a>';
    //                            } else if (JSON.parse(data)[i].status == 2) {
    //                                status = '<a style="color:#d4b6ef">Đã mượn</a>';
    //                            } else if (JSON.parse(data)[i].status == 3) {
    //                                status = '<a style="color:red">Từ chối đơn mượn</a>';
    //                            } else if (JSON.parse(data)[i].status == 4) {
    //                                status = '<a style="color:orange">Đợi tổ trưởng XN trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 5) {
    //                                status = '<a style="color:orange">Đợi kế toán XN trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 6) {
    //                                status = '<a style="color:green">Đã trả</a>';
    //                            } else if (JSON.parse(data)[i].status == 7) {
    //                                status = '<a style="color:red">Từ chối đơn trả</a>';
    //                            }
    //                            row += '<tr>' +
    //                                '<td>' + (i + 1) + '</td>' +
    //                                '<td><a onclick="detailOrder(' + "'" + JSON.parse(data)[i].id + "','" + JSON.parse(data)[i].codeOrder + "','" + JSON.parse(data)[i].status + "','" + JSON.parse(data)[i].create_by + "','" + convert_date2(JSON.parse(data)[i].date_borrow) + "','" + convert_date2(JSON.parse(data)[i].date_return) + "','" + (JSON.parse(data)[i].note != null ? StringToHex(JSON.parse(data)[i].note) : "") + "','" + JSON.parse(data)[i].managerUs_id + "','" + JSON.parse(data)[i].type_order + "'" + ')">' + JSON.parse(data)[i].codeOrder + '</td>' +
    //                                '<td>' + status + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].date_borrow!=null?convert_date2(JSON.parse(data)[i].date_borrow):"") + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].date_return!=null?convert_date2(JSON.parse(data)[i].date_return):"") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].create_by + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].date_borrow!=null?convert_date2(JSON.parse(data)[i].create_date):"") + '</td>' +
    //                                '<td>' + (JSON.parse(data)[i].note != null ? JSON.parse(data)[i].note : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].managerUs_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_managerUs_cf != null ? convert_date2(JSON.parse(data)[i].time_managerUs_cf) : "") + '</td>' +
    //                                '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_Manager != null ? JSON.parse(data)[i].note_Manager : "") + '</td>' +
    //                                '<td>' + JSON.parse(data)[i].leaderNightShift_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_leaderNightShift_cf != null ? convert_date2(JSON.parse(data)[i].time_leaderNightShift_cf) : "") + '</td>' +
    //                                '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_leaderNightShift != null ? JSON.parse(data)[i].note_leaderNightShift : "") + '</td>' +
    //                                 '<td>' + JSON.parse(data)[i].leaderNightBack_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_leaderNightBack_cf != null ? convert_date2(JSON.parse(data)[i].time_leaderNightBack_cf) : "") + '</td>' +
    //                                 '<td style="color: #ff0018;">' + (JSON.parse(data)[i].note_leaderNightBack != null ? JSON.parse(data)[i].note_leaderNightBack : "") + '</td>' +
    //                                 '<td>' + JSON.parse(data)[i].accountantPD_username + '</td>' +
    //                                '<td style="color: chartreuse;">' + (JSON.parse(data)[i].time_accountantPD_cf != null ? convert_date2(JSON.parse(data)[i].time_accountantPD_cf) : "") + '</td>' +
    //                                '<td style="color:#ff0018 ;">' + (JSON.parse(data)[i].note_accountantPD != null ? JSON.parse(data)[i].note_accountantPD : "") + '</td>' +
    //                                '</tr>';
    //                        }
    //                    }
    //                } else {
    //                    row = '<tr><td colspan="23" style="text-align:center">-------------No data-----------</td></tr>';
    //                }
    //            } else {
    //                row = '<tr><td colspan="23" style="text-align:center">-------------No data-----------</td></tr>';
    //            }
    //            $(".load_section").hide();
    //            var shift = $("#select_shift").val();
    //            if (shift == 1) {
    //                $("#tbd_View").empty();
    //                $("#tbd_View").show();
    //                $("#tbd_View").append(row);
    //                $("#tbl_View").show();
    //                $("#tbl_View1").hide();
    //                $("#tbl_View2").hide();
    //            } else if (shift == 2) {
    //                $("#tbd_View1").show();
    //                $("#tbd_View1").empty();
    //                $("#tbd_View1").append(row);
    //                $("#tbl_View").hide();
    //                $("#tbl_View1").show();
    //                $("#tbl_View2").hide();
    //            } else if (shift == 3) {
    //                $("#tbd_View2").show();
    //                $("#tbd_View2").empty();
    //                $("#tbd_View2").append(row);
    //                $("#tbl_View").hide();
    //                $("#tbl_View1").hide();
    //                $("#tbl_View2").show();
    //            }
    //        },
    //        error: function (err) {
    //            //debugger
    //            alert("FAIL!");
    //        }
    //    });
    //}
    //#endregion
    

    function detailOrder(id, code_order, status, create_by, date_borrow, date_return, note_order, managerUs_id) {
        var shift = $("#select_shift").val();
        if (shift == 1 || shift == 2 || shift == 4) {
            if (status != 2 && status != 7) {
                $(".btnReject").hide();
                $(".btnConfirm").hide();
                $(".btnConfirmReturn").hide();
                $(".btnRejectBack").hide();
                $(".btnreject1").hide();
                $(".btnrejectReturn").hide();
                $(".btnConfirmReturnOBA").hide();
                $(".btnrejectReturnOBA").hide();
            } else if (status == 7) {
                $(".btnReject").hide();
                $(".btnConfirm").hide();
                $(".btnConfirmReturn").show();
                $(".btnRejectBack").show();
                $(".btnreject1").hide();
                $(".btnrejectReturn").show();
                $(".btnConfirmReturnOBA").hide();
                $(".btnrejectReturnOBA").hide();
            } else {
                $(".btnReject").show();
                $(".btnConfirm").show();
                $(".btnConfirmReturn").hide();
                $(".btnRejectBack").hide();
                $(".btnreject1").show();
                $(".btnrejectReturn").hide();
                $(".btnConfirmReturnOBA").hide();
                $(".btnrejectReturnOBA").hide();
            }
        } else if (shift == 3) {
            if (status != 5) {
                $(".btnReject").hide();
                $(".btnConfirm").hide();
                $(".btnConfirmReturn").hide();
                $(".btnRejectBack").hide();
                $(".btnreject1").hide();
                $(".btnrejectReturn").hide();
                $(".btnConfirmReturnOBA").hide();
                $(".btnrejectReturnOBA").hide();
            } else {
                $(".btnReject").show();
                $(".btnConfirm").hide();
                $(".btnConfirmReturn").hide();
                $(".btnRejectBack").hide();
                $(".btnreject1").hide();
                $(".btnrejectReturn").hide();
                $(".btnConfirmReturnOBA").show();
                $(".btnrejectReturnOBA").show();
            }
        } 

        $("#code_order").empty();
        $("#order_id").val("");
        $("#employeeID").empty();
        $("#fullname").empty();
        $("#dateBorrow").val("");
        $("#dateReturn").val("");
        $("#noteOrder").val("");
        $("#productName").val("");
        $("#productSN").val("");
        $("#productQuantity").val(1);
        $("#productLine").val(0);

        $("#order_id").val(id);
        $("#code_order").append(code_order);

        var dateBorrow_ = date_borrow.split('-')[2] + '-' + date_borrow.split('-')[1] + '-' + date_borrow.split('-')[0];
        var dateReturn_ = date_return.split('-')[2] + '-' + date_return.split('-')[1] + '-' + date_return.split('-')[0];
        $("#dateBorrow").val(dateBorrow_.replace(" ", ""));
        $("#dateReturn").val(dateReturn_.replace(" ", ""));
        $("#noteOrder").val(HexToString(note_order));
        $("#managerUs").val(managerUs_id);

        $("#employeeID").empty();
        $("#fullname").empty();

        $("#employeeID").append(create_by.split('-')[0]);
        $("#fullname").append(create_by.split('-')[1]);

        $.ajax({
            type: "Post",
            url: "/GetData/getProductInOrder?id=" + id,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                var row = "";
                $("#tbodyView").empty();
                if (JSON.parse(data).length > 0) {
                    for (i = 0; i < JSON.parse(data).length; i++) {
                        var status_product = "";
                        if (shift == 1 || shift == 2 || shift == 4) {
                            if (status == 6 || status == 7 || status == 10 || status == 8 || status == 9) {
                                if (JSON.parse(data)[i].status_product == 1) {
                                    status_product = '<td><a style="color:blue">Chưa Trả</a></td>';
                                } else if (JSON.parse(data)[i].status_product == 2) {
                                    status_product = '<td><a style="color:orange">Đợi Trả</a></td>';
                                } else if (JSON.parse(data)[i].status_product == 3) {
                                    status_product = '<td><a style="color:green">Đã trả(' + convert_date2(JSON.parse(data)[i].date_return) + ')</a></td>';
                                } else {
                                    status_product = '<td></td>';
                                }

                            } else {
                                status_product = '<td></td>';
                            }
                        } else if (shift == 3) {
                            if (status == 5||status==6||status==7) {
                                if (JSON.parse(data)[i].status_product == 1) {
                                    status_product = '<td><a style="color:blue">Chưa Trả</a></td>';
                                } else if (JSON.parse(data)[i].status_product == 2) {
                                    status_product = '<td><a style="color:orange">Đợi Trả</a></td>';
                                } else if (JSON.parse(data)[i].status_product == 3) {
                                    status_product = '<td><a style="color:green">Đã trả(' + convert_date2(JSON.parse(data)[i].date_return) + ')</a></td>';
                                } else {
                                    status_product = '<td></td>';
                                }

                            } else {
                                status_product = '<td></td>';
                            }
                        }
                        
                        row += '<tr>' +
                            '<td>' + (i + 1) + '</td>' +
                            '<td>' + JSON.parse(data)[i].productName + '</td>' +
                            '<td>' + JSON.parse(data)[i].productSN + '</td>' +
                            '<td>' + JSON.parse(data)[i].productQuantity + '</td>' +
                            '<td>' + JSON.parse(data)[i].productLine + '</td>' +
                            '<td>' + (JSON.parse(data)[i].leaderLine_code != null ? JSON.parse(data)[i].leaderLine_code : "") + '</td>' +
                            '<td>' + (JSON.parse(data)[i].leaderLine_name != null ? JSON.parse(data)[i].leaderLine_name : "") + '</td>' +
                            status_product +
                            '</tr>';
                    }
                } else {
                    row = '<tr><td colspan="6">----------No Data----------</td></tr>'
                }
                $("#tbodyView").append(row);
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
        modal.style.display = "block";
    }
    function rejectModel() {
        var id_order = $("#order_id").val();
        $("#id_order").val(id_order);
        modelReject.style.display = "block";
    }
    function rejectReturnModel() {
        var id_order = $("#order_id").val();
        $("#id_order").val(id_order);
        modelReject.style.display = "block";
    }
    function rejectReturn() {
        var idOder = $("#id_order").val();
        var noteReject;
        if ($("#note_reject").val() != 0) {
            noteReject = $("#note_reject").val();
        } else {
            alert("Please fill reason reject!");
            return;
        }
        $.ajax({
            type: "Post",
            url: "/ActionBorrow/AccountantPDRejectOrderReturn?id=" + idOder + "&noteReject=" + noteReject,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                if (data == "OK") {
                    var number = $("#select_status").val();
                    var shift = $("#select_shift").val();
                    loadData(number, shift);
                    modelReject.style.display = "none";
                    modal.style.display = "none";
                } else {
                    alert("Reject Fail!");
                }
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    function rejectReturnOBA() {
        var idOder = $("#id_order").val();
        var noteReject;
        if ($("#note_reject").val() != 0) {
            noteReject = $("#note_reject").val();
        } else {
            alert("Please fill reason reject!");
            return;
        }
        $.ajax({
            type: "Post",
            url: "/ActionBorrow/AccountantPDRejectOrderReturnOBA?id=" + idOder + "&noteReject=" + noteReject,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                if (data == "OK") {
                    var number = $("#select_status").val();
                    var shift = $("#select_shift").val();
                    loadData(number, shift);
                    modelReject.style.display = "none";
                    modal.style.display = "none";
                } else {
                    alert("Reject Fail!");
                }
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    function rejectOrder() {
        var idOder = $("#id_order").val();
        var noteReject;
        if ($("#note_reject").val() != 0) {
            noteReject = $("#note_reject").val();
        } else {
            alert("Please fill reason reject!");
            return;
        }
        $.ajax({
            type: "Post",
            url: "/ActionBorrow/AccountantPDRejectOrder?id=" + idOder + "&noteReject=" + noteReject,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                if (data == "OK") {
                    var number = $("#select_status").val();
                    var shift = $("#select_shift").val();
                    loadData(number, shift);
                    modelReject.style.display = "none";
                    modal.style.display = "none";
                } else {
                    alert("Reject Fail!");
                }
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    function confirmOrder() {
        var idOder = $("#order_id").val();
        $.ajax({
            type: "Post",
            url: "/ActionBorrow/AccountantPDConfirmOrder?id=" + idOder,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                if (data == "OK") {
                    alert("Success!")
                    var number = $("#select_status").val();
                    var shift = $("#select_shift").val();
                    loadData(number, shift);
                    modal.style.display = "none";
                }
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    function confirmReturn() {
        var idOder = $("#order_id").val();
        $.ajax({
            type: "Post",
            url: "/ActionBorrow/AccountantPDConfirmReturn?id=" + idOder,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                if (data == "OK") {
                    alert("Success!")
                    var number = $("#select_status").val();
                    var shift = $("#select_shift").val();
                    loadData(number, shift);
                    modal.style.display = "none";
                }
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    function confirmReturnOBA() {
        var idOder = $("#order_id").val();
        $.ajax({
            type: "Post",
            url: "/ActionBorrow/AccountantPDConfirmReturnOBA?id=" + idOder,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                if (data == "OK") {
                    alert("Success!")
                    var number = $("#select_status").val();
                    var shift = $("#select_shift").val();
                    loadData(number, shift);
                    modal.style.display = "none";
                }
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    function convert_date(date) {
        var completedDate = new Date(parseInt(date.replace("/Date(", "").replace(")/")));
        var dd = completedDate.getDate();
        var mm = completedDate.getMonth() + 1; //January is 0!
        var yyyy = completedDate.getFullYear();
        if (dd < 10) { dd = '0' + dd }
        if (mm < 10) { mm = '0' + mm }
        return dd + '-' + mm + '-' + yyyy;
    }
    function convert_date2(date) {
        if (date != null) {
            var date1 = date.split('T')[0];
            var hour = date.split('T')[1];
            var dateOK = date1.split('-')[2] + '-' + date1.split('-')[1] + '-' + date1.split('-')[0];
            var h = "";
            var a = parseInt(hour.split(':')[0]);
            if ( a!= 0) {
                h = hour.split(':')[0] +":"+ hour.split(':')[1];
            }
            return dateOK + " " + h;
        } else {
            return "";
        }
    }
    $("#input_search").on("keyup", function () {
        //get the input value, trimmed, and lowercased
        var value = this.value.trim().toLowerCase();
        //get the associated table
        var $table;
        $table = $("#tbd_View");
        //show all the rows to "undo" previous filtering
        $table.find('tr').show();

        //only filter if the value is not blank
        if (value) {
            $table.find('thead tr').show();
            //find all the rows that do not match the filter, and hide them
            $table.find('tr').filter(function () {
                return this.innerText.toLowerCase().indexOf(value) < 0;
            }).hide();
        }
    });
    function StringToHex(str) {
        var result = '';
        for (var i = 0; i < str.length; i++) {
            result += str.charCodeAt(i).toString(16);
        }
        return result;
    }
    function HexToString(hexx) {
        var hex = hexx.toString();//force conversion
        var str = '';
        for (var i = 0; i < hex.length; i += 2)
            str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
        return str;
    }

    // Thin sua ngay 2023-05-25
    // LoadData lâu do parse json quá nhiêu trong vong for
    // Sẽ dung ham load Data bên dươi
    function loadData(number, shift) {

        $.ajax({
            type: "Post",
            url: "/GetData/listOrderByAccountantPD?number=" + number + "&shift=" + shift,
            async: true,
            contentType: false,
            processData: false,
            success: function (data) {
                var row = "";
                $("#tbd_View").empty();
                if (data != "") {
                    var userdata = JSON.parse(data);
                    if (userdata.length > 0) {

                        for (i = 0; i < userdata.length; i++) {
                            var status = "";
                            if (userdata[i].type_order == 1) {
                                if (userdata[i].status == 1) {
                                    status = '<a style="color:orange">Đợi QLy BP</a>';
                                } else if (userdata[i].status == 2) {
                                    status = '<a style="color:yellow">Đợi kế toán PD</a>';
                                } else if (userdata[i].status == 3) {
                                    status = '<a style="color:#d4b6ef">Đợi QLy PD2</a>';
                                } else if (userdata[i].status == 4) {
                                    status = '<a style="color:#8500ff">Đợi Tổ trưởng PD</a>';
                                } else if (userdata[i].status == 5) {
                                    status = '<a style="color:red">Từ chối đơn mượn</a>';
                                } else if (userdata[i].status == 6) {
                                    status = '<a style="color:#7df1f1">Đã mượn</a>';
                                } else if (userdata[i].status == 7) {
                                    status = '<a style="color:#e98e73">Đợi xác nhận đơn trả</a>';
                                } else if (userdata[i].status == 8) {
                                    status = '<a style="color:green">Đã trả</a>';
                                } else if (userdata[i].status == 9) {
                                    status = '<a style="color:red">Từ chối dơn trả</a>';
                                } else if (userdata[i].status == 10) {
                                    status = '<a style="color:red">Chưa trả hết</a>';
                                } else if (userdata[i].status == 11) {
                                    status = '<a style="color:red">Đợi QLy PD 1</a>';
                                } else if (userdata[i].status == 12) {
                                    status = '<a style="color:orange">Đợi tổ trưởng</a>';
                                }
                                row += '<tr>' +
                                    '<td>' + (i + 1) + '</td>' +
                                    '<td><a onclick="detailOrder(' + "'" + userdata[i].id + "','" + userdata[i].codeOrder + "','" + userdata[i].status + "','" + userdata[i].create_by + "','" + convert_date2(userdata[i].date_borrow) + "','" + convert_date2(userdata[i].date_return) + "','" + (userdata[i].note != null ? StringToHex(userdata[i].note.replace("\n", " ").replace("\r", " ")) : "") + "','" + userdata[i].managerUs_id + "','" + userdata[i].type_order + "'" + ')">' + userdata[i].codeOrder + '</td>' +
                                    '<td>' + status + '</td>' +
                                    '<td>' + (userdata[i].date_borrow != null ? convert_date2(userdata[i].date_borrow) : "") + '</td>' +
                                    '<td>' + (userdata[i].date_return != null ? convert_date2(userdata[i].date_return) : "") + '</td>' +
                                    '<td>' + userdata[i].create_by + '</td>' +
                                    '<td>' + (userdata[i].date_borrow != null ? convert_date2(userdata[i].create_date) : "") + '</td>' +
                                    '<td>' + (userdata[i].note != null ? userdata[i].note : "") + '</td>' +
                                    '<td>' + userdata[i].managerUs_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_managerUs_cf != null ? convert_date2(userdata[i].time_managerUs_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_Manager != null ? userdata[i].note_Manager : "") + '</td>' +
                                    '<td>' + userdata[i].accountantPD_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_accountantPD_cf != null ? convert_date2(userdata[i].time_accountantPD_cf) : "") + '</td>' +
                                    '<td style="color:#ff0018 ;">' + (userdata[i].note_accountantPD != null ? userdata[i].note_accountantPD : "") + '</td>' +
                                    '<td>' + userdata[i].aKhanh_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_aKhanh_cf != null ? convert_date2(userdata[i].time_aKhanh_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_aKhanh != null ? userdata[i].note_aKhanh : "") + '</td>' +
                                    '<td>' + userdata[i].managerPD_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_managerPD_cf != null ? convert_date2(userdata[i].time_managerPD_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_managerPD != null ? userdata[i].note_managerPD : "") + '</td>' +
                                    '<td>' + userdata[i].aTin_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_aTin_cf != null ? convert_date2(userdata[i].time_aTin_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_aTin != null ? userdata[i].note_aTin : "") + '</td>' +
                                    '<td>' + userdata[i].accountantPDBack_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_accountantPDBack_cf != null ? convert_date2(userdata[i].time_accountantPDBack_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_back_accountantPD != null ? userdata[i].note_back_accountantPD : "") + '</td>' +
                                    '</tr>';
                            } else if (userdata[i].type_order == 2) {
                                if (userdata[i].status == 1) {
                                    status = '<a style="color:orange">Đợi QLy BP</a>';
                                } else if (userdata[i].status == 2) {
                                    status = '<a style="color:yellow">Đợi kế toán PD</a>';
                                } else if (userdata[i].status == 3) {
                                    status = '<a style="color:#d4b6ef">Đợi QLy PD2</a>';
                                } else if (userdata[i].status == 4) {
                                    status = '<a style="color:#8500ff">Đợi Tổ trưởng PD</a>';
                                } else if (userdata[i].status == 5) {
                                    status = '<a style="color:red">Từ chối đơn mượn</a>';
                                } else if (userdata[i].status == 6) {
                                    status = '<a style="color:#7df1f1">Đã mượn</a>';
                                } else if (userdata[i].status == 7) {
                                    status = '<a style="color:#e98e73">Đợi xác nhận đơn trả</a>';
                                } else if (userdata[i].status == 8) {
                                    status = '<a style="color:green">Đã trả</a>';
                                } else if (userdata[i].status == 9) {
                                    status = '<a style="color:red">Từ chối dơn trả</a>';
                                } else if (userdata[i].status == 10) {
                                    status = '<a style="color:red">Chưa trả hết</a>';
                                } else if (userdata[i].status == 11) {
                                    status = '<a style="color:red">Đợi QLy PD 1</a>';
                                } else if (userdata[i].status == 12) {
                                    status = '<a style="color:orange">Đợi tổ trưởng</a>';
                                }
                                row += '<tr>' +
                                    '<td>' + (i + 1) + '</td>' +
                                    '<td><a onclick="detailOrder(' + "'" + userdata[i].id + "','" + userdata[i].codeOrder + "','" + userdata[i].status + "','" + userdata[i].create_by + "','" + convert_date2(userdata[i].date_borrow) + "','" + convert_date2(userdata[i].date_return) + "','" + (userdata[i].note != null ? StringToHex(userdata[i].note) : "") + "','" + userdata[i].managerUs_id + "','" + userdata[i].type_order + "'" + ')">' + userdata[i].codeOrder + '</td>' +
                                    '<td>' + status + '</td>' +
                                    '<td>' + (userdata[i].date_borrow != null ? convert_date2(userdata[i].date_borrow) : "") + '</td>' +
                                    '<td>' + (userdata[i].date_return != null ? convert_date2(userdata[i].date_return) : "") + '</td>' +
                                    '<td>' + userdata[i].create_by + '</td>' +
                                    '<td>' + (userdata[i].date_borrow != null ? convert_date2(userdata[i].create_date) : "") + '</td>' +
                                    '<td>' + (userdata[i].note != null ? userdata[i].note : "") + '</td>' +
                                    '<td>' + userdata[i].managerUs_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_managerUs_cf != null ? convert_date2(userdata[i].time_managerUs_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_Manager != null ? userdata[i].note_Manager : "") + '</td>' +
                                    '<td>' + userdata[i].leaderNightShift_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_leaderNightShift_cf != null ? convert_date2(userdata[i].time_leaderNightShift_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_leaderNightShift != null ? userdata[i].note_leaderNightShift : "") + '</td>' +
                                    '<td>' + userdata[i].accountantPD_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_accountantPD_cf != null ? convert_date2(userdata[i].time_accountantPD_cf) : "") + '</td>' +
                                    '<td style="color:#ff0018 ;">' + (userdata[i].note_accountantPD != null ? userdata[i].note_accountantPD : "") + '</td>' +
                                    '<td>' + userdata[i].aKhanh_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_aKhanh_cf != null ? convert_date2(userdata[i].time_aKhanh_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_aKhanh != null ? userdata[i].note_aKhanh : "") + '</td>' +
                                    '<td>' + userdata[i].managerPD_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_managerPD_cf != null ? convert_date2(userdata[i].time_managerPD_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_managerPD != null ? userdata[i].note_managerPD : "") + '</td>' +
                                    '<td>' + userdata[i].aTin_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_aTin_cf != null ? convert_date2(userdata[i].time_aTin_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_aTin != null ? userdata[i].note_aTin : "") + '</td>' +
                                    '<td>' + userdata[i].accountantPDBack_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_accountantPDBack_cf != null ? convert_date2(userdata[i].time_accountantPDBack_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_back_accountantPD != null ? userdata[i].note_back_accountantPD : "") + '</td>' +
                                    '</tr>';
                            } else if (userdata[i].type_order == 3) {
                                if (userdata[i].status == 1) {
                                    status = '<a style="color:orange">Đợi QLy BP</a>';
                                } else if (userdata[i].status == 12) {
                                    status = '<a style="color:yellow">Đợi tổ trưởng</a>';
                                } else if (userdata[i].status == 2) {
                                    status = '<a style="color:#d4b6ef">Đã mượn</a>';
                                } else if (userdata[i].status == 3) {
                                    status = '<a style="color:red">Từ chối đơn mượn</a>';
                                } else if (userdata[i].status == 4) {
                                    status = '<a style="color:orange">Đợi tổ trưởng XN trả</a>';
                                } else if (userdata[i].status == 5) {
                                    status = '<a style="color:orange">Đợi kế toán XN trả</a>';
                                } else if (userdata[i].status == 6) {
                                    status = '<a style="color:green">Đã trả</a>';
                                } else if (userdata[i].status == 7) {
                                    status = '<a style="color:red">Từ chối đơn trả</a>';
                                }
                                row += '<tr>' +
                                    '<td>' + (i + 1) + '</td>' +
                                    '<td><a onclick="detailOrder(' + "'" + userdata[i].id + "','" + userdata[i].codeOrder + "','" + userdata[i].status + "','" + userdata[i].create_by + "','" + convert_date2(userdata[i].date_borrow) + "','" + convert_date2(userdata[i].date_return) + "','" + (userdata[i].note != null ? StringToHex(userdata[i].note) : "") + "','" + userdata[i].managerUs_id + "','" + userdata[i].type_order + "'" + ')">' + userdata[i].codeOrder + '</td>' +
                                    '<td>' + status + '</td>' +
                                    '<td>' + (userdata[i].date_borrow != null ? convert_date2(userdata[i].date_borrow) : "") + '</td>' +
                                    '<td>' + (userdata[i].date_return != null ? convert_date2(userdata[i].date_return) : "") + '</td>' +
                                    '<td>' + userdata[i].create_by + '</td>' +
                                    '<td>' + (userdata[i].date_borrow != null ? convert_date2(userdata[i].create_date) : "") + '</td>' +
                                    '<td>' + (userdata[i].note != null ? userdata[i].note : "") + '</td>' +
                                    '<td>' + userdata[i].managerUs_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_managerUs_cf != null ? convert_date2(userdata[i].time_managerUs_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_Manager != null ? userdata[i].note_Manager : "") + '</td>' +
                                    '<td>' + userdata[i].leaderNightShift_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_leaderNightShift_cf != null ? convert_date2(userdata[i].time_leaderNightShift_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_leaderNightShift != null ? userdata[i].note_leaderNightShift : "") + '</td>' +
                                    '<td>' + userdata[i].leaderNightBack_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_leaderNightBack_cf != null ? convert_date2(userdata[i].time_leaderNightBack_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_leaderNightBack != null ? userdata[i].note_leaderNightBack : "") + '</td>' +
                                    '<td>' + userdata[i].accountantPD_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_accountantPD_cf != null ? convert_date2(userdata[i].time_accountantPD_cf) : "") + '</td>' +
                                    '<td style="color:#ff0018 ;">' + (userdata[i].note_accountantPD != null ? userdata[i].note_accountantPD : "") + '</td>' +
                                    '</tr>';
                            } else if (userdata[i].type_order == 4) {
                                if (userdata[i].status == 1) {
                                    status = '<a style="color:orange">Đợi QLy BP</a>';
                                } else if (userdata[i].status == 2) {
                                    status = '<a style="color:yellow">Đợi kế toán PD</a>';
                                } else if (userdata[i].status == 3) {
                                    status = '<a style="color:#d4b6ef">Đợi QLy PD2</a>';
                                } else if (userdata[i].status == 4) {
                                    status = '<a style="color:#8500ff">Đợi Tổ trưởng PD</a>';
                                } else if (userdata[i].status == 5) {
                                    status = '<a style="color:red">Từ chối đơn mượn</a>';
                                } else if (userdata[i].status == 6) {
                                    status = '<a style="color:#7df1f1">Đã mượn</a>';
                                } else if (userdata[i].status == 7) {
                                    status = '<a style="color:#e98e73">Đợi xác nhận đơn trả</a>';
                                } else if (userdata[i].status == 8) {
                                    status = '<a style="color:green">Đã trả</a>';
                                } else if (userdata[i].status == 9) {
                                    status = '<a style="color:red">Từ chối dơn trả</a>';
                                } else if (userdata[i].status == 10) {
                                    status = '<a style="color:red">Chưa trả hết</a>';
                                } else if (userdata[i].status == 11) {
                                    status = '<a style="color:red">Đợi QLy PD 1</a>';
                                } else if (userdata[i].status == 12) {
                                    status = '<a style="color:orange">Đợi tổ trưởng</a>';
                                }
                                row += '<tr>' +
                                    '<td>' + (i + 1) + '</td>' +
                                    '<td><a onclick="detailOrder(' + "'" + userdata[i].id + "','" + userdata[i].codeOrder + "','" + userdata[i].status + "','" + userdata[i].create_by + "','" + convert_date2(userdata[i].date_borrow) + "','" + convert_date2(userdata[i].date_return) + "','" + (userdata[i].note != null ? StringToHex(userdata[i].note.replace("\n", " ").replace("\r", " ")) : "") + "','" + userdata[i].managerUs_id + "','" + userdata[i].type_order + "'" + ')">' + userdata[i].codeOrder + '</td>' +
                                    '<td>' + status + '</td>' +
                                    '<td>' + (userdata[i].date_borrow != null ? convert_date2(userdata[i].date_borrow) : "") + '</td>' +
                                    '<td>' + (userdata[i].date_return != null ? convert_date2(userdata[i].date_return) : "") + '</td>' +
                                    '<td>' + userdata[i].create_by + '</td>' +
                                    '<td>' + (userdata[i].date_borrow != null ? convert_date2(userdata[i].create_date) : "") + '</td>' +
                                    '<td>' + (userdata[i].note != null ? userdata[i].note : "") + '</td>' +
                                    '<td>' + userdata[i].managerUs_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_managerUs_cf != null ? convert_date2(userdata[i].time_managerUs_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_Manager != null ? userdata[i].note_Manager : "") + '</td>' +
                                    '<td>' + userdata[i].accountantPD_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_accountantPD_cf != null ? convert_date2(userdata[i].time_accountantPD_cf) : "") + '</td>' +
                                    '<td style="color:#ff0018 ;">' + (userdata[i].note_accountantPD != null ? userdata[i].note_accountantPD : "") + '</td>' +
                                    '<td>' + userdata[i].aKhanh_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_aKhanh_cf != null ? convert_date2(userdata[i].time_aKhanh_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_aKhanh != null ? userdata[i].note_aKhanh : "") + '</td>' +
                                    '<td>' + userdata[i].managerPD_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_managerPD_cf != null ? convert_date2(userdata[i].time_managerPD_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_managerPD != null ? userdata[i].note_managerPD : "") + '</td>' +
                                    '<td>' + userdata[i].aTin_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_aTin_cf != null ? convert_date2(userdata[i].time_aTin_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_aTin != null ? userdata[i].note_aTin : "") + '</td>' +
                                    '<td>' + userdata[i].accountantPDBack_username + '</td>' +
                                    '<td style="color: chartreuse;">' + (userdata[i].time_accountantPDBack_cf != null ? convert_date2(userdata[i].time_accountantPDBack_cf) : "") + '</td>' +
                                    '<td style="color: #ff0018;">' + (userdata[i].note_back_accountantPD != null ? userdata[i].note_back_accountantPD : "") + '</td>' +
                                    '</tr>';
                            }
                        }
                    } else {
                        row = '<tr><td colspan="23" style="text-align:center">-------------No data-----------</td></tr>';
                    }
                    delete userdata
                } else {
                    row = '<tr><td colspan="23" style="text-align:center">-------------No data-----------</td></tr>';
                }
                $(".load_section").hide();
                var shift = $("#select_shift").val();
                if (shift == 1) {
                    $("#tbd_View").empty();
                    $("#tbd_View").show();
                    $("#tbd_View").append(row);
                    $("#tbl_View").show();
                    $("#tbl_View1").hide();
                    $("#tbl_View2").hide();
                } else if (shift == 2) {
                    $("#tbd_View1").show();
                    $("#tbd_View1").empty();
                    $("#tbd_View1").append(row);
                    $("#tbl_View").hide();
                    $("#tbl_View1").show();
                    $("#tbl_View2").hide();
                } else if (shift == 3) {
                    $("#tbd_View2").show();
                    $("#tbd_View2").empty();
                    $("#tbd_View2").append(row);
                    $("#tbl_View").hide();
                    $("#tbl_View1").hide();
                    $("#tbl_View2").show();
                } else if (shift == 4) {
                    $("#tbd_View").empty();
                    $("#tbd_View").show();
                    $("#tbd_View").append(row);
                    $("#tbl_View").show();
                    $("#tbl_View1").hide();
                    $("#tbl_View2").hide();
                }
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
</script>

