@model IEnumerable<ToolingRoomManagement.Models.Device_ManagerModel>
@{
    ViewBag.Title = "StaffPage";
    Layout = "~/Areas/Admin/Views/Shared/_Layout_AdminPage.cshtml";
    var listAllDevice = (List<Model.EF.Device>)ViewBag.listAllDevice;
    var listManager = (List<Model.EF.User>)ViewBag.listManager;
    int dem = 0; int dem2 = 0; int dem3 = 0; int dem1 = 0; int dem4 = 0;
    int all = 0;
    int kind1 = 0;
    int kind2 = 0;
    int kind3 = 0;
    int kind4 = 0;
    float _kind1 = 0;
    float _kind2 = 0;
    float _kind3 = 0;
    float _kind4 = 0;
}
<script src="/Assets/admin/js/vendor/jquery-1.12.4.min.js"></script>
<link href="~/Assets/admin/bootstrap-select.css" rel="stylesheet" />
@*<script src="~/Assets/client/vendor/jquery/jquery.min.js"></script>*@

<script src="~/Assets/admin/bootstrap-select.js"></script>
@foreach (var item in listAllDevice)
{
    { all++; }
    if (item.kind_of_device == 1)
    {
        { kind1 = kind1 + 1; }
    }
    else if (item.kind_of_device == 2)
    {
        { kind2 = kind2 + 1; }
    }
    else if (item.kind_of_device == 3)
    {
        { kind3 = kind3 + 1; }
    }
    else
    {
        { kind4 = kind4 + 1; }
    }
}
@{
    _kind1 = (float.Parse(kind1.ToString()) / float.Parse(all.ToString())) * 100;
    _kind2 = (float.Parse(kind2.ToString()) / float.Parse(all.ToString())) * 100;
    _kind3 = (float.Parse(kind3.ToString()) / float.Parse(all.ToString())) * 100;
    _kind4 = (float.Parse(kind4.ToString()) / float.Parse(all.ToString())) * 100;
}
<link href="~/Assets/client/vendor/bootstrap/css/the-datepicker.css" rel="stylesheet" />
<script src="~/Assets/client/vendor/jquery/the-datepicker.js"></script>

<style>
    h6 {
        color: aliceblue;
    }

        h6 b {
            font-weight: 700;
        }

    @@media (min-width: 900px) {
        .modal-sm {
            width: 900px;
        }
    }

    @@media (min-width: 900px) {
        .modal-content {
            -webkit-box-shadow: 0 5px 15px rgba(0,0,0,.5);
            box-shadow: 0 5px 15px rgba(0,0,0,.5);
        }
    }

    .tblCreate thead tr th {
        text-align: center;
    }

    .tblCreate tbody tr td {
        text-align: center;
    }

    .tblCreate tbody tr td {
        border: 0;
    }

    #device_name {
        background: white;
        color: black;
        width: 80%;
    }

    #quantity {
        background: white;
        color: black;
        width: 80%;
    }

    #tblAddDevice thead tr th {
        text-align: center;
    }

    #tblAddDevice tbody tr td {
        text-align: center;
    }

    .zoom {
        transition: transform .5s;
    }

        .zoom:hover {
            transform: scale(1.1); /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
        }

    .btn-default {
        height: 43px;
    }

    .tblCreate tbody tr td {
        height: 60px;
    }

    ::-webkit-scrollbar {
        width: 5px;
        height: 5px;
    }

    ::-webkit-scrollbar-thumb {
        -webkit-box-shadow: inset 0 0 4px 9px rgba(0,0,0,0.3);
        border-radius: 10px;
    }

    @@keyframes example {
        0% {
            background-color: red;
        }

        25% {
            background-color: #1b2a47;
        }

        50% {
            background-color: red;
        }

        75% {
            background-color: #1b2a47;
        }

        100% {
            background-color: red;
        }
    }

    .animation {
        background-color: red;
        position: relative;
        animation-name: example;
        animation-duration: 4s;
        animation-iteration-count: infinite;
    }

    .tblShow {
        border: 1px solid;
    }

        .tblShow thead tr th {
            vertical-align: middle;
            background: #2d9aca;
            padding: 0px 0px 0px 5px;
            position: sticky;
            top: -3px;
        }

        .tblShow tbody tr td {
            vertical-align: middle;
            padding: 6px 15px;
        }

    #tbl thead tr th {
        word-break: break-all;
        background: #5c7096;
        position: sticky;
        top: -3px;
        font-size: 1.7vh;
    }

    #tbl tbody tr td {
        word-break: break-all;
        font-size: 1.5vh;
    }

    #tbl1 thead tr th {
        background: #5c7096;
        position: sticky;
        top: -3px;
        font-size: 1.7vh;
    }

    #tbl1 tbody tr td {
        word-break: break-all;
        font-size: 1.5vh;
    }

    #tbl2 thead tr th {
        background: #5c7096;
        position: sticky;
        top: -3px;
        font-size: 1.7vh;
    }

    #tbl2 tbody tr td {
        word-break: break-all;
        font-size: 1.5vh;
    }

    #tbl3 thead tr th {
        background: #5c7096;
        position: sticky;
        top: -3px;
        font-size: 1.7vh;
    }

    #tbl3 tbody tr td {
        word-break: break-all;
        font-size: 1.5vh;
    }

    #tbl4 thead tr th {
        background: #5c7096;
        position: sticky;
        top: -3px;
    }

    #tbl4 tbody tr td {
        word-break: break-all;
        font-size: 1.5vh;
    }
</style>
<div>
    <div class="header-advance-area">

        <!-- Mobile Menu start -->
        <div class="mobile-menu-area">
            <div class="container">

            </div>
        </div>
        <!-- Mobile Menu end -->
        <div class="breadcome-area" style="margin-top: 40px;">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="breadcome-list" style="padding: 10px 20px 10px 20px;margin: 30px 0px 10px 0px;" onclick="show_table('tbl')">
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                    <div class="breadcomb-wp">
                                        <div class="breadcomb-icon zoom" data-toggle="tooltip" data-placement="bottom" title="Home">
                                            <a href="/Admin/Admin/StaffPage"><i class="icon nalika-home"></i></a>
                                        </div>
                                        <div class="breadcomb-ctn">
                                            <h2 langKey="all_device">All Devices</h2>
                                            <p>Welcome to Tooling <span class="bread-ntd">Room</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                    <div class="breadcomb-report">
                                        <button data-toggle="tooltip" data-placement="left" title="Xuất Excel" class="btn" onclick="fnExcelReport()"><i class="icon nalika-download"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section-admin container-fluid">
            <div class="row admin text-center">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                            <div class="admin-content analysis-progrebar-ctn res-mg-t-15" onclick="show_table('tbl1')" style="padding: 10px 20px 10px 20px;">
                                <h6 class="text-left text-uppercase"><b langKey="fix_device">Thiết bị cố định</b></h6>
                                <div class="row vertical-center-box vertical-center-box-tablet">
                                    <div class="col-xs-3 mar-bot-15 text-left">
                                        <label class="label bg-green" id="_kind1">@string.Format("{0:N2}", _kind1) % <i class="fa fa-level-up" aria-hidden="true"></i></label>
                                    </div>
                                    <div class="col-xs-9 cus-gh-hd-pro">
                                        <h2 class="text-right no-margin" id="kind1">@kind1</h2>
                                    </div>
                                </div>
                                <div class="progress progress-mini">
                                    <div style="width: @string.Format("{0:N2}", _kind1)%" class="progress-bar bg-green"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                            <div class="admin-content analysis-progrebar-ctn res-mg-t-30" onclick="show_table('tbl2')" style="padding: 10px 20px 10px 20px;">
                                <h6 class="text-left text-uppercase"><b langKey="consum_device">Thiết bị tiêu hao</b></h6>
                                <div class="row vertical-center-box vertical-center-box-tablet">
                                    <div class="text-left col-xs-3 mar-bot-15">
                                        <label class="label bg-blue">@string.Format("{0:N2}", _kind2) % <i class="fa fa-level-up" aria-hidden="true"></i></label>
                                    </div>
                                    <div class="col-xs-9 cus-gh-hd-pro">
                                        <h2 class="text-right no-margin">@kind2</h2>
                                    </div>
                                </div>
                                <div class="progress progress-mini">
                                    <div style="width: @string.Format("{0:N2}", _kind2)%;" class="progress-bar bg-blue"></div>
                                </div>
                            </div>
                        </div>
                        @*<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                                <div class="admin-content analysis-progrebar-ctn res-mg-t-30" onclick="show_table('tbl3')" style="padding: 10px 20px 10px 20px;">
                                    <h6 class="text-left text-uppercase"><b>Thiết bị hao trái</b></h6>
                                    <div class="row vertical-center-box vertical-center-box-tablet">
                                        <div class="text-left col-xs-3 mar-bot-15">
                                            <label class="label bg-purple">@string.Format("{0:N2}", _kind3) % <i class="fa fa-level-up" aria-hidden="true"></i></label>
                                        </div>
                                        <div class="col-xs-9 cus-gh-hd-pro">
                                            <h2 class="text-right no-margin">@kind3</h2>
                                        </div>
                                    </div>
                                    <div class="progress progress-mini">
                                        <div style="width: @string.Format("{0:N2}", _kind3)%;" class="progress-bar bg-purple"></div>
                                    </div>
                                </div>
                            </div>*@
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12" style="margin-bottom:1px;">
                            <div class="admin-content analysis-progrebar-ctn res-mg-t-30" onclick="show_table('tbl3')" style="padding: 10px 20px 10px 20px;">
                                <h6 class="text-left text-uppercase"><b langKey="reserve_device">Thiết bị dự phòng</b></h6>
                                <div class="row vertical-center-box vertical-center-box-tablet">
                                    <div class="text-left col-xs-3 mar-bot-15">
                                        <label class="label bg-red">@string.Format("{0:N2}", _kind3) % <i class="fa fa-level-down" aria-hidden="true"></i></label>
                                    </div>
                                    <div class="col-xs-9 cus-gh-hd-pro">
                                        <h2 class="text-right no-margin">@kind3</h2>
                                    </div>
                                </div>
                                <div class="progress progress-mini">
                                    <div style="width: @string.Format("{0:N2}", _kind3)%;" class="progress-bar progress-bar-danger bg-red"></div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="product-sales-area mg-tb-30" style="margin: 10px 0px;">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="product-sales-chart" style="padding: 5px 10px 5px 20px;">
                        <div class="portlet-title">
                            <div class="row">
                                <div style="width:33.33%;float:left;height: 280px;">
                                    <div style="padding: 5px 26px 5px 10px;overflow:auto;">
                                        <div style="overflow:auto;height: 277px;">
                                            <table class="tblShow table-bordered" style="width: 100%;color:white;">
                                                <thead>
                                                    <tr style="height:45px;">
                                                        <th style="width:80%;" langKey="name_device">Tên TB</th>
                                                        <th langKey="quantity">Số lượng</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbl_1">
                                                    @foreach (var item in listAllDevice)
                                                    {
                                                        if (item.kind_of_device == 1)
                                                        {
                                                            if (item.quantity <= item.gioihan)
                                                            {
                                                                <tr class="animation" style="background-color: #e6333394">
                                                                    <td>@item.device_name</td>
                                                                    <td>@item.quantity</td>
                                                                </tr>
                                                            }
                                                            else
                                                            {
                                                                <tr>
                                                                    <td>@item.device_name</td>
                                                                    <td>@item.quantity</td>
                                                                </tr>
                                                            }

                                                        }
                                                    }
                                                </tbody>


                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div style="width:33.33%;float:left;height: 280px;">
                                    <div style="padding: 5px 18px 5px 4px;overflow:auto;">
                                        <div style="overflow:auto;height: 277px;">
                                            <table class="tblShow table-bordered" style="width: 100%; color:white;">
                                                <thead>
                                                    <tr style="height:45px;">
                                                        <th style="width:80%;" langKey="name_device">Tên TB</th>
                                                        <th langKey="quantity">Số lượng</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbl_2">
                                                    @foreach (var item in listAllDevice)
                                                    {
                                                        if (item.kind_of_device == 2)
                                                        {
                                                            if (item.quantity <= item.gioihan)
                                                            {
                                                                <tr class="animation" style="background-color: #e6333394">
                                                                    <td>@item.device_name</td>
                                                                    <td>@item.quantity</td>
                                                                </tr>
                                                            }
                                                            else
                                                            {
                                                                <tr>
                                                                    <td>@item.device_name</td>
                                                                    <td>@item.quantity</td>
                                                                </tr>
                                                            }
                                                        }
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div style="width:33.33%;float:left;height: 280px;">
                                    <div style="padding: 5px 10px 5px 10px;overflow:auto;">
                                        <div style="overflow:auto;height: 277px;">
                                            <table class="tblShow table-bordered" style="width: 100%;color:white;">
                                                <thead>
                                                    <tr style="height:45px;">
                                                        <th style="width:80%;" langKey="name_device">Tên TB</th>
                                                        <th langKey="quantity">Số lượng</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbl_3">
                                                    @foreach (var item in listAllDevice)
                                                    {
                                                        if (item.kind_of_device == 3)
                                                        {
                                                            if (item.quantity <= item.gioihan)
                                                            {
                                                                <tr class="animation" style="background-color: #e6333394">
                                                                    <td>@item.device_name</td>
                                                                    <td>@item.quantity</td>
                                                                </tr>
                                                            }
                                                            else
                                                            {
                                                                <tr>
                                                                    <td>@item.device_name</td>
                                                                    <td>@item.quantity</td>
                                                                </tr>
                                                            }
                                                        }
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="product-sales-area mg-tb-30" style="margin: 10px 0px;height: 70vh;">
        <div class="container-fluid" style="height: 70vh;">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="product-sales-chart" style="padding: 6px 20px 5px 20px;">
                        <div class="portlet-title">
                            <div class="row">
                                <div class="content">
                                    <div>
                                        <button class="zoom" id="btnAddDevice" style="border: 1px solid #f39800;background-color: #f39800;width: 110px;height: 40px;border-radius: 5px;">Nhập TB mới</button>
                                        <button class="zoom" style="border: 1px solid #49a247;background-color: forestgreen;width: 110px;height: 40px;border-radius: 5px; color: #f1eee8;" onclick="open_Modal_Input()">Nhập kho</button>
                                        <div class="col-lg-2 col-md-7 col-sm-6 col-xs-12" style="float:right;width: 300px;">
                                            <div class="header-top-menu tabl-d-n hd-search-rp">
                                                <div class="breadcome-heading" style="margin: 0px 0px 10px 0px;">
                                                    <form role="search" class="">
                                                        <input id="input_search" type="text" placeholder="Search..." class="form-control" style="width: 283px;color: #fffaf0;height: 39px;">
                                                        <a href="" style="left: 257px;margin-top: -23px;"><i class="fa fa-search"></i></a>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="" style="overflow:auto;height: 60vh; width:100%;">
                                        <table id="tbl" class="table table-bordered" style="color:floralwhite;text-align:center;">
                                            <thead style="background:#5c7096;">
                                                <tr>
                                                    <th fieldName="stt" scope="col" style="text-align:center;width:2%;">STT</th>
                                                    <th fieldName="code_device" scope="col" style="text-align:center;width: 6.2%;" langKey="code_device">Mã TB</th>
                                                    <th fieldName="device_name" scope="col" style="text-align:center; width:10%" langKey="name_device">Tên TB</th>
                                                    <th fieldName="quantity" scope="col" style="text-align:center; width:4%" langKey="quantity">Số lượng</th>
                                                    <th fieldName="price" scope="col" style="text-align:center; width:4%;" langKey="price_device">Giá</th>
                                                    <th fieldName="brand" scope="col" style="text-align:center; width:4%;" langKey="model_device">Nhãn hiệu</th>
                                                    <th fieldName="parameter" scope="col" style="text-align:center;width:10%;" langKey="parameter">Quy cách</th>
                                                    <th fieldName="unit" scope="col" style="text-align:center;width:5%;" langKey="unit">Đơn vị</th>
                                                    <th fieldName="location" scope="col" style="text-align:center;width:5%;" langKey="location">Vị trí</th>
                                                    <th fieldName="status" scope="col" style="text-align:center;width:5%;" langKey="status_1">TT</th>
                                                    <th fieldName="note_status" scope="col" style="text-align:center;width:5%;" langKey="">Ghi chú</th>
                                                    <th fieldName="makiemke" scope="col" style="text-align:center;width:5%;" langKey="inventory_stamp">Kiểm kê</th>
                                                    <th fieldName="produce_SN" scope="col" style="text-align:center;width:5%;" langKey="SN_code">SN</th>
                                                    <th fieldName="calibration" scope="col" style="text-align:center; width:5%;" langKey="calibration">Hiệu chỉnh</th>
                                                    <th formatType="dateOutput" fieldName="create_date" scope="col" style="text-align:center; width:6%;" langKey="create_date">Ngày nhập</th>
                                                    <th formatType="dateOutput" fieldName="update_date" scope="col" style="text-align:center;width:6%;" langKey="update_date">Ngày update</th>
                                                    <th fieldName="kind_of_device" scope="col" style="text-align:center;width:4%;" langKey="kindOfDevice">Loại TB</th>
                                                    @*<th fieldName="manager_id" scope="col" style="text-align:center;width:4%;" langKey="manager">Quản lý</th>*@
                                                    <th fieldName="image_TB" scope="col" style="text-align:center;width:4%;" langKey="image">Hình ảnh</th>
                                                    <th fieldName="action" scope="col" style="text-align:center;width:5%;" langKey="action">Hành động</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbl_id"></tbody>
                                        </table>
                                        <table hidden id="tbl1" class="table table-bordered" style="color:floralwhite;text-align:center;">
                                            <thead style="background:#5c7096;">
                                                <tr>
                                                    <th scope="col" style="text-align:center;width:2%;">STT</th>
                                                    <th scope="col" style="text-align:center;width: 6.2%;">Mã TB</th>
                                                    <th scope="col" style="text-align:center; width:12%">Tên TB</th>
                                                    <th scope="col" style="text-align:center; width:4%">Số lượng</th>
                                                    <th scope="col" style="text-align:center; width:4%;">Giá</th>
                                                    <th scope="col" style="text-align:center; width:4%;">Nhãn hiệu</th>
                                                    <th scope="col" style="text-align:center;width:14%;">Quy cách</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Đơn vị</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Vị trí</th>
                                                    <th scope="col" style="text-align:center;width:4%;">TT</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="">Ghi chú</th>
                                                    <th scope="col" style="text-align:center; width:5%;">Kiểm kê</th>
                                                    <th scope="col" style="text-align:center;width:5%;">SN</th>
                                                    <th scope="col" style="text-align:center; width:5%;">Hiệu chỉnh</th>
                                                    <th scope="col" style="text-align:center; width:6%;">Ngày nhập</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Ngày update</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Loại TB</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Quản lý</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Hình ảnh</th>
                                                    <th scope="col" style="text-align:center;">Hành động</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbl1_id">
                                                @foreach (var device in Model)
                                                {
                                                    if (device.device.kind_of_device == 1)
                                                    {
                                                        { dem1++; }
                                                        if (device.device.quantity < device.device.gioihan)
                                                        {
                                                            <tr class="animation" style="background-color:#e6333394;">

                                                                <td scope="row">@dem1</td>
                                                                <td>@device.device.code_device</td>
                                                                <td style="text-align:left;">@device.device.device_name</td>
                                                                <td>@device.device.quantity</td>
                                                                <td>@device.device.price</td>
                                                                <td>@(device.device.brand != null ? device.device.brand.Trim() : "N/A")</td>

                                                                <td>@device.device.parameter</td>

                                                                <td>@(device.device.unit != null ? device.device.unit.Trim() : "N/A")</td>

                                                                <td>@(device.device.location != null ? device.device.location.Trim() : "N/A")</td>

                                                                <td>@(device.device.status == 1 ? "OK" : device.device.status == 2 ? "NG" : "N/A")</td>
                                                                <td>@(device.device.note_status != null ? device.device.note_status : "")</td>
                                                                <td>@(device.device.makiemke != null ? device.device.makiemke.Trim() : "N/A")</td>
                                                                <td>@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "N/A")</td>
                                                                <td>@(device.device.calibration != null ? device.device.calibration.Trim() : "N/A")</td>
                                                                @if (device.device.create_date != null)
                                                                {
                                                                    <td>@device.device.create_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                @if (device.device.update_date != null)
                                                                {
                                                                    <td>@device.device.update_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                <td>@(device.device.kind_of_device == 1 ? "TB CĐ" : device.device.kind_of_device == 2 ? "TB TH" : device.device.kind_of_device == 3 ? "TB HT" : device.device.kind_of_device == 4 ? "TB DP" : "N/A")</td>
                                                                <td>@device.user_name</td>
                                                                <td><button style="background: forestgreen;border: 1px solid green;border-radius: 7px;" onclick="ViewImage('@device.device.image_TB','@device.device.note_status')">Xem</button></td>
                                                                <td>
                                                                    @if (device.device.calibration != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "N")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.calibration != null && device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")'','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }

                                                                    @*<button style="border: 0px;background: #1b2a47;" onclick="deleteDevice(@device.device.id)"><i class="fa fa-trash" style="color:red;"></i></button>*@
                                                                </td>


                                                            </tr>
                                                        }
                                                        else
                                                        {
                                                            <tr>

                                                                <td scope="row">@dem1</td>
                                                                <td>@device.device.code_device</td>
                                                                <td style="text-align:left;">@device.device.device_name</td>
                                                                <td>@device.device.quantity</td>
                                                                <td>@device.device.price</td>
                                                                <td>@(device.device.brand != null ? device.device.brand.Trim() : "N/A")</td>

                                                                <td>@device.device.parameter</td>

                                                                <td>@(device.device.unit != null ? device.device.unit.Trim() : "N/A")</td>

                                                                <td>@(device.device.location != null ? device.device.location.Trim() : "N/A")</td>

                                                                <td>@(device.device.status == 1 ? "OK" : device.device.status == 2 ? "NG" : "N/A")</td>
                                                                <td>@(device.device.note_status != null ? device.device.note_status : "")</td>
                                                                <td>@(device.device.makiemke != null ? device.device.makiemke.Trim() : "N/A")</td>
                                                                <td>@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "N/A")</td>
                                                                <td>@(device.device.calibration != null ? device.device.calibration.Trim() : "N/A")</td>
                                                                @if (device.device.create_date != null)
                                                                {
                                                                    <td>@device.device.create_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                @if (device.device.update_date != null)
                                                                {
                                                                    <td>@device.device.update_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                <td>@(device.device.kind_of_device == 1 ? "TB CĐ" : device.device.kind_of_device == 2 ? "TB TH" : device.device.kind_of_device == 3 ? "TB HT" : device.device.kind_of_device == 4 ? "TB DP" : "N/A")</td>
                                                                <td>@device.user_name</td>
                                                                <td><button style="background: forestgreen;border: 1px solid green;border-radius: 7px;" onclick="ViewImage('@device.device.image_TB','@device.device.note_status')">Xem</button></td>
                                                                <td>
                                                                    @if (device.device.calibration != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "N")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.calibration != null && device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")'','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }

                                                                    @*<button style="border: 0px;background: #1b2a47;" onclick="deleteDevice(@device.device.id)"><i class="fa fa-trash" style="color:red;"></i></button>*@
                                                                </td>


                                                            </tr>
                                                        }
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                        <table hidden id="tbl2" class="table table-bordered" style="color:floralwhite;text-align:center;">
                                            <thead style="background:#5c7096;">
                                                <tr>
                                                    <th scope="col" style="text-align:center;width:2%;">STT</th>
                                                    <th scope="col" style="text-align:center;width: 6.2%;" langKey="code_device">Mã TB</th>
                                                    <th scope="col" style="text-align:center; width:10%" langKey="name_device">Tên TB</th>
                                                    <th scope="col" style="text-align:center; width:4%" langKey="quantity">Số lượng</th>
                                                    <th scope="col" style="text-align:center; width:4%;" langKey="price_device">Giá</th>
                                                    <th scope="col" style="text-align:center; width:4%;" langKey="model_device">Nhãn hiệu</th>
                                                    <th scope="col" style="text-align:center;width:10%;" langKey="parameter">Quy cách</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="unit">Đơn vị</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="location">Vị trí</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="status_1">TT</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="">Ghi chú</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="inventory_stamp">Kiểm kê</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="SN_code">SN</th>
                                                    <th scope="col" style="text-align:center; width:5%;" langKey="calibration">Hiệu chỉnh</th>
                                                    <th scope="col" style="text-align:center; width:5%;" langKey="create_date">Ngày nhập</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="update_date">Ngày update</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="kindOfDevice">Loại TB</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="manager">Quản lý</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="image">Hình ảnh</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="action">Hành động</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbl2_id">
                                                @foreach (var device in Model)
                                                {
                                                    if (device.device.kind_of_device == 2)
                                                    {
                                                        { dem2++; }
                                                        if (device.device.quantity <= device.device.gioihan)
                                                        {
                                                            <tr class="animation" style="background-color:#e6333394;">

                                                                <td scope="row">@dem2</td>
                                                                <td>@device.device.code_device</td>
                                                                <td style="text-align:left;">@device.device.device_name</td>
                                                                <td>@device.device.quantity</td>
                                                                <td>@device.device.price</td>
                                                                <td>@(device.device.brand != null ? device.device.brand.Trim() : "N/A")</td>

                                                                <td>@device.device.parameter</td>

                                                                <td>@(device.device.unit != null ? device.device.unit.Trim() : "N/A")</td>

                                                                <td>@(device.device.location != null ? device.device.location.Trim() : "N/A")</td>

                                                                <td>@(device.device.status == 1 ? "OK" : device.device.status == 2 ? "NG" : "N/A")</td>
                                                                <td>@(device.device.note_status != null ? device.device.note_status : "")</td>
                                                                <td>@(device.device.makiemke != null ? device.device.makiemke.Trim() : "N/A")</td>
                                                                <td>@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "N/A")</td>
                                                                <td>@(device.device.calibration != null ? device.device.calibration.Trim() : "N/A")</td>
                                                                @if (device.device.create_date != null)
                                                                {
                                                                    <td>@device.device.create_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                @if (device.device.update_date != null)
                                                                {
                                                                    <td>@device.device.update_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                <td>@(device.device.kind_of_device == 1 ? "TB CĐ" : device.device.kind_of_device == 2 ? "TB TH" : device.device.kind_of_device == 3 ? "TB HT" : device.device.kind_of_device == 4 ? "TB DP" : "N/A")</td>
                                                                <td>@device.user_name</td>
                                                                <td><button style="background: forestgreen;border: 1px solid green;border-radius: 7px;" onclick="ViewImage('@device.device.image_TB','@device.device.note_status')">Xem</button></td>
                                                                <td>
                                                                    @if (device.device.calibration != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "N")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.calibration != null && device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")'','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }

                                                                    @*<button style="border: 0px;background: #1b2a47;" onclick="deleteDevice(@device.device.id)"><i class="fa fa-trash" style="color:red;"></i></button>*@
                                                                </td>


                                                            </tr>
                                                        }
                                                        else
                                                        {
                                                            <tr>

                                                                <td scope="row">@dem2</td>
                                                                <td>@device.device.code_device</td>
                                                                <td style="text-align:left;">@device.device.device_name</td>
                                                                <td>@device.device.quantity</td>
                                                                <td>@device.device.price</td>
                                                                <td>@(device.device.brand != null ? device.device.brand.Trim() : "N/A")</td>

                                                                <td>@device.device.parameter</td>

                                                                <td>@(device.device.unit != null ? device.device.unit.Trim() : "N/A")</td>

                                                                <td>@(device.device.location != null ? device.device.location.Trim() : "N/A")</td>

                                                                <td>@(device.device.status == 1 ? "OK" : device.device.status == 2 ? "NG" : "N/A")</td>
                                                                <td>@(device.device.note_status != null ? device.device.note_status : "")</td>
                                                                <td>@(device.device.makiemke != null ? device.device.makiemke.Trim() : "N/A")</td>
                                                                <td>@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "N/A")</td>
                                                                <td>@(device.device.calibration != null ? device.device.calibration.Trim() : "N/A")</td>
                                                                @if (device.device.create_date != null)
                                                                {
                                                                    <td>@device.device.create_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                @if (device.device.update_date != null)
                                                                {
                                                                    <td>@device.device.update_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                <td>@(device.device.kind_of_device == 1 ? "TB CĐ" : device.device.kind_of_device == 2 ? "TB TH" : device.device.kind_of_device == 3 ? "TB HT" : device.device.kind_of_device == 4 ? "TB DP" : "N/A")</td>
                                                                <td>@device.user_name</td>
                                                                <td><button style="background: forestgreen;border: 1px solid green;border-radius: 7px;" onclick="ViewImage('@device.device.image_TB','@device.device.note_status')">Xem</button></td>
                                                                <td>
                                                                    @if (device.device.calibration != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null ?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "N")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.calibration != null && device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")'','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }

                                                                    @*<button style="border: 0px;background: #1b2a47;" onclick="deleteDevice(@device.device.id)"><i class="fa fa-trash" style="color:red;"></i></button>*@
                                                                </td>


                                                            </tr>
                                                        }
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                        <table hidden id="tbl4" class="table table-bordered" style="color:floralwhite;text-align:center;">
                                            <thead style="background:#5c7096;">
                                                <tr>
                                                    <th scope="col" style="text-align:center;width:2%;">STT</th>
                                                    <th scope="col" style="text-align:center;width: 6.2%;" langKey="code_device">Mã TB</th>
                                                    <th scope="col" style="text-align:center; width:10%" langKey="name_device">Tên TB</th>
                                                    <th scope="col" style="text-align:center; width:4%" langKey="quantity">Số lượng</th>
                                                    <th scope="col" style="text-align:center; width:4%;" langKey="price_device">Giá</th>
                                                    <th scope="col" style="text-align:center; width:4%;" langKey="model_device">Nhãn hiệu</th>
                                                    <th scope="col" style="text-align:center;width:10%;" langKey="parameter">Quy cách</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="unit">Đơn vị</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="location">Vị trí</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="status_1">TT</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="">Ghi chú</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="inventory_stamp">Kiểm kê</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="SN_code">SN</th>
                                                    <th scope="col" style="text-align:center; width:5%;" langKey="calibration">Hiệu chỉnh</th>
                                                    <th scope="col" style="text-align:center; width:6%;" langKey="create_date">Ngày nhập</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="update_date">Ngày update</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="kindOfDevice">Loại TB</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="manager">Quản lý</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="image">Hình ảnh</th>
                                                    <th scope="col" style="text-align:center;width:4%;" langKey="action">Hành động</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbl3_id">
                                                @foreach (var device in Model)
                                                {
                                                    if (device.device.kind_of_device == 3)
                                                    {
                                                        { dem3++; }
                                                        if (device.device.quantity <= device.device.gioihan)
                                                        {
                                                            <tr class="animation" style="background-color:#e6333394;">

                                                                <td scope="row">@dem3</td>
                                                                <td>@device.device.code_device</td>
                                                                <td style="text-align:left;">@device.device.device_name</td>
                                                                <td>@device.device.quantity</td>
                                                                <td>@device.device.price</td>
                                                                <td>@(device.device.brand != null ? device.device.brand.Trim() : "N/A")</td>

                                                                <td>@device.device.parameter</td>

                                                                <td>@(device.device.unit != null ? device.device.unit.Trim() : "N/A")</td>

                                                                <td>@(device.device.location != null ? device.device.location.Trim() : "N/A")</td>

                                                                <td>@(device.device.status == 1 ? "OK" : device.device.status == 2 ? "NG" : "N/A")</td>
                                                                <td>@(device.device.note_status != null ? device.device.note_status : "")</td>
                                                                <td>@(device.device.makiemke != null ? device.device.makiemke.Trim() : "N/A")</td>
                                                                <td>@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "N/A")</td>
                                                                <td>@(device.device.calibration != null ? device.device.calibration.Trim() : "N/A")</td>
                                                                @if (device.device.create_date != null)
                                                                {
                                                                    <td>@device.device.create_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                @if (device.device.update_date != null)
                                                                {
                                                                    <td>@device.device.update_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                <td>@(device.device.kind_of_device == 1 ? "TB CĐ" : device.device.kind_of_device == 2 ? "TB TH" : device.device.kind_of_device == 3 ? "TB HT" : device.device.kind_of_device == 4 ? "TB DP" : "N/A")</td>
                                                                <td>@device.user_name</td>
                                                                <td><button style="background: forestgreen;border: 1px solid green;border-radius: 7px;" onclick="ViewImage('@device.device.image_TB','@device.device.note_status')">Xem</button></td>
                                                                <td>
                                                                    @if (device.device.calibration != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "N")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.calibration != null && device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")'','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }

                                                                    @*<button style="border: 0px;background: #1b2a47;" onclick="deleteDevice(@device.device.id)"><i class="fa fa-trash" style="color:red;"></i></button>*@
                                                                </td>


                                                            </tr>
                                                        }
                                                        else
                                                        {
                                                            <tr>

                                                                <td scope="row">@dem3</td>
                                                                <td>@device.device.code_device</td>
                                                                <td style="text-align:left;">@device.device.device_name</td>
                                                                <td>@device.device.quantity</td>
                                                                <td>@device.device.price</td>
                                                                <td>@(device.device.brand != null ? device.device.brand.Trim() : "N/A")</td>

                                                                <td>@device.device.parameter</td>

                                                                <td>@(device.device.unit != null ? device.device.unit.Trim() : "N/A")</td>

                                                                <td>@(device.device.location != null ? device.device.location.Trim() : "N/A")</td>

                                                                <td>@(device.device.status == 1 ? "OK" : device.device.status == 2 ? "NG" : "N/A")</td>
                                                                <td>@(device.device.note_status != null ? device.device.note_status : "")</td>
                                                                <td>@(device.device.makiemke != null ? device.device.makiemke.Trim() : "N/A")</td>
                                                                <td>@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "N/A")</td>
                                                                <td>@(device.device.calibration != null ? device.device.calibration.Trim() : "N/A")</td>
                                                                @if (device.device.create_date != null)
                                                                {
                                                                    <td>@device.device.create_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                @if (device.device.update_date != null)
                                                                {
                                                                    <td>@device.device.update_date.Value.ToString("dd/MM/yyyy")</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>N/A</td>
                                                                }
                                                                <td>@(device.device.kind_of_device == 1 ? "TB CĐ" : device.device.kind_of_device == 2 ? "TB TH" : device.device.kind_of_device == 3 ? "TB HT" : device.device.kind_of_device == 4 ? "TB DP" : "N/A")</td>
                                                                <td>@device.user_name</td>
                                                                <td><button style="background: forestgreen;border: 1px solid green;border-radius: 7px;" onclick="ViewImage('@device.device.image_TB','@device.device.note_status')">Xem</button></td>
                                                                <td>
                                                                    @if (device.device.calibration != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "N")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else if (device.device.calibration != null && device.device.update_date != null)
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")'','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }
                                                                    else
                                                                    {
                                                                        <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@(device.device.gioihan!=null?device.device.gioihan:0)','@(device.device.gioihan!=null?device.device.gioihan:0)','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id','@device.device.makiemke','@device.device.note_status')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                    }

                                                                    @*<button style="border: 0px;background: #1b2a47;" onclick="deleteDevice(@device.device.id)"><i class="fa fa-trash" style="color:red;"></i></button>*@
                                                                </td>


                                                            </tr>
                                                        }
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                        <table hidden id="tbl3" class="table table-bordered" style="color:floralwhite;text-align:center;">
                                            <thead style="background:#5c7096;">
                                                <tr>
                                                    <th scope="col" style="text-align:center;width:2%">STT</th>
                                                    <th scope="col" style="text-align:center;width: 6.2%;">Mã TB</th>
                                                    <th scope="col" style="text-align:center; width:12%">Tên TB</th>
                                                    <th scope="col" style="text-align:center; width:4%">Số lượng</th>
                                                    <th scope="col" style="text-align:center; width:4%;">Giá</th>
                                                    <th scope="col" style="text-align:center; width:4%;">Nhãn hiệu</th>
                                                    <th scope="col" style="text-align:center;width:14%;">Quy cách</th>
                                                    <th scope="col" style="text-align:center;">Đơn vị</th>
                                                    <th scope="col" style="text-align:center;">Vị trí</th>
                                                    <th scope="col" style="text-align:center;">TT</th>
                                                    <th scope="col" style="text-align:center;width:5%;" langKey="">Ghi chú</th>
                                                    <th scope="col" style="text-align:center; width:5%;">Kiểm kê</th>
                                                    <th scope="col" style="text-align:center;">SN</th>
                                                    <th scope="col" style="text-align:center; width:5%;">Hiệu chỉnh</th>
                                                    <th scope="col" style="text-align:center; width:6%;">Ngày nhập</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Ngày update</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Loại TB</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Quản lý</th>
                                                    <th scope="col" style="text-align:center;width:4%;">Hình ảnh</th>
                                                    <th scope="col" style="text-align:center;">Hành động</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbl3_id">
                                                @*@foreach (var device in Model)
                                                    {
                                                        if (device.device.kind_of_device == 4)
                                                        {
                                                            { dem4++; }
                                                            if (device.device.quantity <= device.device.gioihan)
                                                            {
                                                                <tr class="animation" style="background-color:#e6333394;">

                                                                    <td scope="row">@dem</td>
                                                                    <td>@device.device.code_device</td>
                                                                    <td style="text-align:left;">@device.device.device_name</td>
                                                                    <td>@device.device.quantity</td>
                                                                    <td>@device.device.price</td>
                                                                    <td>@(device.device.brand != null ? device.device.brand.Trim() : "N/A")</td>

                                                                    <td>@device.device.parameter</td>

                                                                    <td>@(device.device.unit != null ? device.device.unit.Trim() : "N/A")</td>
                                                                    <td>@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "N/A")</td>
                                                                    <td>@(device.device.location != null ? device.device.location.Trim() : "N/A")</td>

                                                                    <td>@(device.device.status == 1 ? "OK" : device.device.status == 2 ? "NG" : "N/A")</td>
                                                                    @if (device.device.calibration != null)
                                                                    {
                                                                        <td>@device.device.calibration.Value.ToString("dd/MM/yyyy")</td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td>N/A</td>
                                                                    }
                                                                    @if (device.device.create_date != null)
                                                                    {
                                                                        <td>@device.device.create_date.Value.ToString("dd/MM/yyyy")</td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td>N/A</td>
                                                                    }
                                                                    @if (device.device.update_date != null)
                                                                    {
                                                                        <td>@device.device.update_date.Value.ToString("dd/MM/yyyy")</td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td>N/A</td>
                                                                    }
                                                                    <td>@(device.device.kind_of_device == 1 ? "TB CĐ" : device.device.kind_of_device == 2 ? "TB TH" : device.device.kind_of_device == 3 ? "TB HT" : device.device.kind_of_device == 4 ? "TB DP" : "N/A")</td>
                                                                    <td>@device.user_name</td>
                                                                    <td>
                                                                        @if (device.device.calibration != null)
                                                                        {
                                                                            <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                        }
                                                                        else if (device.device.update_date != null)
                                                                        {
                                                                            <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "N")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                        }
                                                                        else if (device.device.calibration != null && device.device.update_date != null)
                                                                        {
                                                                            <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")'','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                        }
                                                                        else
                                                                        {
                                                                            <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                        }

                                                                        <button style="border: 0px;background: #1b2a47;" onclick="deleteDevice(@device.device.id)"><i class="fa fa-trash" style="color:red;"></i></button>
                                                                    </td>


                                                                </tr>
                                                            }
                                                            else
                                                            {
                                                                <tr>

                                                                    <td scope="row">@dem</td>
                                                                    <td>@device.device.code_device</td>
                                                                    <td style="text-align:left;">@device.device.device_name</td>
                                                                    <td>@device.device.quantity</td>
                                                                    <td>@device.device.price</td>
                                                                    <td>@(device.device.brand != null ? device.device.brand.Trim() : "N/A")</td>

                                                                    <td>@device.device.parameter</td>

                                                                    <td>@(device.device.unit != null ? device.device.unit.Trim() : "N/A")</td>
                                                                    <td>@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "N/A")</td>
                                                                    <td>@(device.device.location != null ? device.device.location.Trim() : "N/A")</td>

                                                                    <td>@(device.device.status == 1 ? "OK" : device.device.status == 2 ? "NG" : "N/A")</td>
                                                                    @if (device.device.calibration != null)
                                                                    {
                                                                        <td>@device.device.calibration.Value.ToString("dd/MM/yyyy")</td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td>N/A</td>
                                                                    }
                                                                    @if (device.device.create_date != null)
                                                                    {
                                                                        <td>@device.device.create_date.Value.ToString("dd/MM/yyyy")</td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td>N/A</td>
                                                                    }
                                                                    @if (device.device.update_date != null)
                                                                    {
                                                                        <td>@device.device.update_date.Value.ToString("dd/MM/yyyy")</td>
                                                                    }
                                                                    else
                                                                    {
                                                                        <td>N/A</td>
                                                                    }
                                                                    <td>@(device.device.kind_of_device == 1 ? "TB CĐ" : device.device.kind_of_device == 2 ? "TB TH" : device.device.kind_of_device == 3 ? "TB HT" : device.device.kind_of_device == 4 ? "TB DP" : "N/A")</td>
                                                                    <td>@device.user_name</td>
                                                                    <td>
                                                                        @if (device.device.calibration != null)
                                                                        {
                                                                            <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                        }
                                                                        else if (device.device.update_date != null)
                                                                        {
                                                                            <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "N")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                        }
                                                                        else if (device.device.calibration != null && device.device.update_date != null)
                                                                        {
                                                                            <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")'','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date.Value.ToString("yyyy-MM-dd")','@device.device.kind_of_device','@device.device.manager_id')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                        }
                                                                        else
                                                                        {
                                                                            <button style="border: 0px;background: #1b2a47;" onclick="editDevice('@device.device.id','@device.device.code_device','@device.device.status','@device.device.device_name.Trim()','@device.device.quantity','@device.device.price.Trim()','@(device.device.brand != null ? device.device.brand.Trim() : "")','@device.device.parameter.Trim()','@(device.device.unit != null ? device.device.unit.Trim() : "")','@(device.device.produce_SN != null ? device.device.produce_SN.Trim() : "")','@(device.device.location != null ? device.device.location.Trim() : "")','@(device.device.calibration!=null?device.device.calibration:"")','@device.device.update_date','@device.device.kind_of_device','@device.device.manager_id')"><i class="fa fa-edit" style="color:#dee83b;"></i></button>
                                                                        }

                                                                        <button style="border: 0px;background: #1b2a47;" onclick="deleteDevice(@device.device.id)"><i class="fa fa-trash" style="color:red;"></i></button>
                                                                    </td>


                                                                </tr>
                                                            }
                                                        }
                                                    }*@
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<div class="modal" id="myModal_Input">
    <div class="modal-dialog modal-sm" style="width: 80vw;">
        <div class="modal-content" style="">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Input Devices</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body" style="height:560px;overflow:auto;">
                <input hidden id="receive_id" />
                <table style="border:0;width:100%" id="tblAddDevice">
                    <thead>
                        <tr style="height:50px;">
                            <th style="width: 20%;">Đầu đơn</th>
                            <th style="width: 25%;">Tên TB</th>
                            <th style="width:25%">Loại TB</th>
                            @*<th style="width:15%;">Kho</th>*@
                            <th style="width:15%;">Số lượng</th>
                            <th style="width:15%;">Hành động</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" class="form-control TYPEDEVICE order_code" style="background-color:white;color:black;width:90%;margin-left:10px;height:43px;border: 1px solid #c3bfbf;" id=""></td>
                            <td>
                                <select id="device_name_add" class="selectpicker Da_select_model form-control" data-hide-disabled="true" data-live-search="true">
                                    @foreach (var device in listAllDevice)
                                    {
                                        <option value="@device.id">@device.code_device @device.device_name (@device.parameter) Kho: @device.location</option>
                                    }
                                </select>
                            </td>
                            <td>
                                <select class="form-control kindOfDevice" id="" style="height:42px; border: 1px solid #c3bfbf;border-radius: 1px;background: white;color: black;width: 98%;margin-left: 7px;padding: 8px;">
                                    <option value="0">Chọn Loại thiết bị</option>
                                    <option value="1">TB Cố định</option>
                                    <option value="2">TB Tiêu hao</option>
                                    <option value="3">TB Dự phòng</option>
                                </select>
                            </td>
                            @*<td>
                                    <select class="form-control location" id="location_device" style="height:42px; border: 1px solid #c3bfbf;border-radius: 1px;background: white;color: black;width: 98%;margin-left: 7px;padding: 8px;">
                                        <option value="0">Chọn kho</option>
                                        <option value="1">Auto</option>
                                        <option value="2">Arlo</option>
                                        <option value="3">Netgear</option>
                                    </select>
                                </td>*@
                            <td><input type="text" class="form-control TYPEDEVICE quantity_input" style="background-color:white;color:black;width:100%;margin-left:10px;height:43px;border: 1px solid #c3bfbf;" id=""></td>
                            <td style="text-align:center;">
                                <button onclick="Add_Input()" style="background: aquamarine;border: 1px solid;padding: 5px 15px 5px 15px;border-radius: 20px;">Nhập</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                @*<table class="table table-dark tblCreate">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>Device Name</th>
                                <th>Unit</th>
                                <th>Quantity</th>
                                <th>Type</th>
                                <th>Note</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="tblReceive" style="text-align:center;"></tbody>
                    </table>*@
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btnclose">Đóng</button>
                <button type="button" class="btn btn-secondary">Hoàn tất</button>
            </div>

        </div>
    </div>
</div>
<!-- The Modal: Thêm và sửa thiết bị -->
<div class="modal" id="myModal">
    <div class="modal-dialog modal-sm">
        <div class="modal-content" style="">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Create New Device</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <form>
                <!-- Modal body -->
                <div class="modal-body" style="height:560px;overflow:auto;">
                    @*<input hidden id="id_device" />*@
                    <table class="tblCreate" style="width:50%;float: left;">
                        <tr>
                            <td>Mã TB : </td>
                            <td><input class="form-control" required name="code_device" id="code_device" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black; width: 80%;" /></td>
                        </tr>
                        <tr>
                            <td>Tên TB : </td>
                            <td><input class="form-control" required name="device_name" id="device_name" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black; width: 80%;" /></td>
                        </tr>
                        <tr>
                            <td>Số lượng : </td>
                            <td>
                                <input type="number" min="0" class="form-control" required name="quantity" id="quantity" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                            </td>
                        </tr>
                        <tr>
                            <td>Giới hạn : </td>
                            <td>
                                <input type="number" class="form-control" required name="gioihan" id="gioihan" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                            </td>
                        </tr>
                        <tr>
                            <td>Giá : </td>
                            <td>
                                <input class="form-control" required name="price" id="price" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                            </td>
                        </tr>

                        <tr>
                            <!--Nhãn hiệu -->
                            <td>Nhãn hiệu : </td>
                            <td>
                                <input class="form-control" required name="brand" id="brand" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                            </td>
                        </tr>
                        <tr>
                            <!--Quy cách -->
                            <td>Quy cách : </td>
                            <td>
                                <input class="form-control" required name="parameter" id="parameter" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                            </td>
                        </tr>
                        <tr>
                            <!--Đơn vị-->
                            <td>Đơn vị : </td>
                            <td>
                                <input class="form-control" required name="unit" id="unit" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                            </td>
                        </tr>

                    </table>
                    <table class="tblCreate" style="width:50%;float:left">


                        <tr>
                            <!--Vị trí-->
                            <td>Kho : </td>
                            <td>
                                <select required name="location" class="form-control" id="location" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                                    <option value="">Chọn kho</option>
                                    <option value="1">Auto</option>
                                    <option value="2">Arlo</option>
                                    <option value="3">NetGear</option>
                                    <option value="4">Label</option>
                                    <option value="5">Thiet bi</option>
                                    <option value="6">Tooling Room</option>
                                </select>
                                @*<input class="form-control" id="location" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black; width: 80%;" />*@
                            </td>
                        </tr>

                        <tr>
                            <!--Ngày update-->
                            <td>Ngày cập nhật : </td>
                            <td><input type="date" required name="update_date" class="form-control" id="update_date" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black; width: 80%;" /></td>
                        </tr>
                        <tr>
                            <!--Loại thiết bị-->
                            <td>Loại TB : </td>
                            <td>
                                <select class="form-control" required name="kind_of_device" id="kindOfDevice" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                                    <option value="">Chọn Loại thiết bị</option>
                                    <option value="1">TB Cố định</option>
                                    <option value="2">TB Tiêu hao</option>
                                    <option value="3">TB Dự phòng</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Trạng thái TB : </td>
                            <td>
                                <select class="form-control" required name="status" id="statusTB" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                                    <option value="">Chọn trạng thái TB</option>
                                    <option value="1">OK</option>
                                    <option value="2">NG</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <!--Tem kiểm kê-->
                            <td>Tem kiểm kê: </td>
                            <td><input type="text" name="makiemke" class="form-control" id="temkiemke" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black; width: 80%;" /></td>
                        </tr>
                        <tr>
                            <td>Mã SN: </td>
                            <td><input class="form-control" name="produce_SN" id="produce_SN" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black; width: 80%;" /></td>
                        </tr>
                        <tr>
                            <!--Hiệu chỉnh-->
                            <td>Hiệu chuẩn: </td>
                            <td><input type="text" name="calibration" class="form-control" id="calibration" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black; width: 80%;" /></td>
                        </tr>

                        <tr>
                            <td>Quản lý : </td>
                            <td>
                                <select required name="manager_id" class="form-control" id="manager" style="border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;">
                                    <option value="0">Chọn quản lý</option>
                                    @foreach (var user in listManager)
                                    {
                                        <option value="@user.id">@user.fullname</option>
                                    }
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Ghi chú: </td>
                            <td>
                                <textarea name="note_status" id="noteStatus" style="float: left;border: 1px solid #a58147;border-radius: 20px;background: white;color: black;width: 80%;/* padding: 0; */margin: 0;" class="form-controle"></textarea>
                            </td>
                        </tr>
                    </table>
                </div>
            </form>
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btnclose">Đóng</button>
                <button type="button" id="btnSaveDevice" class="btn btn-secondary btnClick">Hoàn tất</button>
            </div>

        </div>
    </div>
</div><!-- End The Modal: Thêm và sửa thiết bị -->

<div class="modal" id="myModal_Image">
    <div class="modal-dialog modal-sm">
        <div class="modal-content" style="">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Create New Device</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body" style="height:450px;">
                <input hidden id="id_device" />

                <div id="imageTB"> </div>
                <h5>Note: </h5>
                <textarea id="note_status" disabled style="border: 1px solid #80808082;color: red;background: #9ddaec4d;width: 850px;height: 50px;border-radius: 5px;"></textarea>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btnclose">Đóng</button>
            </div>
        </div>
    </div>
</div>
<script src="/Assets/admin/js/vendor/jquery-1.12.4.min.js"></script>
<script src="~/Assets/client/vendor/jquery/table.min.js"></script>
<script>
    var tab = "tbl";
    function show_table(id_table) {
        var i;
        var x = document.getElementsByClassName("table");
        for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
        }
        document.getElementById(id_table).style.display = "block";
        tab = id_table;
    }
    function fnExcelReport() {
        var tab_text = "<table border='2px'><tr bgcolor='#87AFC6'>";
        var textRange; var j = 0;
        tab = document.getElementById('tbl'); // id of table

        for (j = 0; j < tab.rows.length; j++) {
            tab_text = tab_text + tab.rows[j].innerHTML + "</tr>";
            //tab_text=tab_text+"</tr>";
        }

        tab_text = tab_text + "</table>";
        /*tab_text = tab_text.replace(/<A[^>]*>|<\/A>/g, "");*///remove if u want links in your table
        /* tab_text = tab_text.replace(/<img[^>]*>/gi, "");*/ // remove if u want images in your table
        tab_text = tab_text.replace(/<input[^>]*>|<\/input>/gi, ""); // reomves input params

        var ua = window.navigator.userAgent;
        var msie = ua.indexOf("MSIE ");

        if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))      // If Internet Explorer
        {
            txtArea1.document.open("txt/html", "replace");
            txtArea1.document.write(tab_text);
            txtArea1.document.close();
            txtArea1.focus();
            sa = txtArea1.document.execCommand("SaveAs", true, "List All Devices.xls");
        }
        else                 //other browser not tested on IE 11
            //sa = window.open('data:application/vnd.ms-excel,' + encodeURIComponent(tab_text));
            var a = document.createElement('a');
        a.href = 'data:application/vnd.ms-excel,' + encodeURIComponent(tab_text);
        a.download = "List All Devices.xls";
        a.click();

        return (sa);
    }
    $(document).ready(function () {
        //loadData1();
        //loadData2();
        function search() {
            $("#input_search").on("keyup", function () {
                //get the input value, trimmed, and lowercased
                var value = this.value.trim().toLowerCase();
                //get the associated table
                var $table;
                if (tab == "tbl") {
                    $table = $("#tbl_id");
                } else if (tab == "tbl1") {
                    $table = $("#tbl1_id");
                } else if (tab == "tbl2") {
                    $table = $("#tbl2_id");
                } else if (tab == "tbl3") {
                    $table = $("#tbl3_id");
                } else if (tab == "tbl4") {
                    $table = $("#tbl3_id");
                }


                //show all the rows to "undo" previous filtering
                $table.find('tr').show();

                //only filter if the value is not blank
                if (value) {
                    $table.find('thead tr').show();
                    //find all the rows that do not match the filter, and hide them
                    $table.find('tr').filter(function () {

                        return this.innerText.toLowerCase().indexOf(value) < 0;
                    }).hide();
                }
            });
        };
        search();
        bindingKindOfDeviceSelected();
        onchangeDevice_name_addSelect();
    })
    function loadData1() {
        $.ajax({
            type: "Post",
            url: "/Admin/Admin/getAllDevice",
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                var length = JSON.parse(data).length;
                var row1 = "", row2 = "", row3 = "";
                for (i = 0; i < length; i++) {


                    if (JSON.parse(data)[i].kind_of_device == 1) {
                        if (JSON.parse(data)[i].quantity < 5) {
                            row1 += "<tr class='animation' style='background-color: #e6333394'>" +
                                "<td>" + JSON.parse(data)[i].device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].quantity + "</td>" +
                                "</tr>";
                        }
                        else {
                            row1 += "<tr>" +
                                "<td>" + JSON.parse(data)[i].device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].quantity + "</td>" +
                                "</tr>";
                        }

                    }
                    if (JSON.parse(data)[i].kind_of_device == 2) {
                        if (JSON.parse(data)[i].quantity < 5) {
                            row2 += "<tr class='animation' style='background-color: #e6333394'>" +
                                "<td>" + JSON.parse(data)[i].device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].quantity + "</td>" +
                                "</tr>";
                        }
                        else {
                            row2 += "<tr>" +
                                "<td>" + JSON.parse(data)[i].device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].quantity + "</td>" +
                                "</tr>";
                        }

                    }
                    if (JSON.parse(data)[i].kind_of_device == 3) {
                        if (JSON.parse(data)[i].quantity < 5) {
                            row3 += "<tr class='animation' style='background-color: #e6333394'>" +
                                "<td>" + JSON.parse(data)[i].device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].quantity + "</td>" +
                                "</tr>";
                        }
                        else {
                            row3 += "<tr>" +
                                "<td>" + JSON.parse(data)[i].device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].quantity + "</td>" +
                                "</tr>";
                        }

                    }

                }
                $("#tbl_1").append(row1);
                $("#tbl_2").append(row2);
                $("#tbl_3").append(row3);
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    function loadData2() {
        $.ajax({
            type: "Post",
            url: "/Admin/Admin/getDevice_Manage",
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                var length = JSON.parse(data).length;
                var row = "", row1 = "", row2 = "", row3 = "";
                var result1 = "", result2 = "", result3 = "";
                var kind1 = "", kind2 = "", kind3 = "";
                var but1 = "", but2 = "", but3 = "", but4 = "";
                var dem = 0, dem1 = 0, dem2 = 0, dem3 = 0;
                for (i = 0; i < length; i++) {
                    dem++;
                    var edit = "'" + JSON.parse(data)[i].device.id + "','" + JSON.parse(data)[i].device.code_device + "','" + JSON.parse(data)[i].device.status + "','" + JSON.parse(data)[i].device.device_name + "','" + JSON.parse(data)[i].device.quantity + "','" + JSON.parse(data)[i].device.gioihan + "','" + JSON.parse(data)[i].device.price + "','" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "','" + JSON.parse(data)[i].device.parameter + "','" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "','" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN.Trim() : "") + "','" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "','" + JSON.parse(data)[i].device.calibration + "','" + JSON.parse(data)[i].device.update_date + "','" + JSON.parse(data)[i].device.kind_of_device + "','" + JSON.parse(data)[i].device.manager_id + "','" + JSON.parse(data)[i].device.makiemke + "','" + (JSON.parse(data)[i].device.note_status != null ? JSON.parse(data)[i].device.note_status : "") + "'";
                    var deleteDepartment = "'" + JSON.parse(data)[i].Id + "'";

                    if (JSON.parse(data)[i].device.quantity <= JSON.parse(data)[i].device.gioihan) {
                        var kind;
                        if (JSON.parse(data)[i].device.kind_of_device == 1) {
                            kind = "TB CĐ";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 2) {
                            kind = "TB TH";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 3) {
                            var kind = "TB DP";
                        }
                        row += "<tr class='animation' style='background-color:#e6333394;'>" +

                            "<td scope='row'>" + dem + "</td>" +
                            "<td>" + JSON.parse(data)[i].device.code_device + "</td>" +
                            "<td style='text-align:left;'>" + JSON.parse(data)[i].device.device_name + "</td>" +
                            "<td>" + JSON.parse(data)[i].device.quantity + "</td>" +
                            "<td>" + JSON.parse(data)[i].device.price + "</td>" +
                            "<td>" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "</td>" +

                            "<td>" + JSON.parse(data)[i].device.parameter + "</td>" +

                            "<td>" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "</td>" +
                            "<td>" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN : "") + "</td>" +
                            "<td>" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "</td>" +

                            "<td>" + (JSON.parse(data)[i].device.status == 1 ? "OK" : JSON.parse(data)[i].device.status == 2 ? "NG" : "N/A") + "</td>" +

                            "<td>" + (JSON.parse(data)[i].device.calibration != null ? JSON.parse(data)[i].device.calibration : "") + "</td>" +
                            "<td>" + JSON.parse(data)[i].device.create_date + "</td>" +
                            "<td>" + (JSON.parse(data)[i].device.update_date != null ? JSON.parse(data)[i].device.update_date : "") + "</td>" +

                            "<td>" + kind + "</td>" +
                            "<td>" + JSON.parse(data)[i].user_name + "</td>" +
                            "<td>" +
                            '<button style="border: 0px;background: #1b2a47;" onclick="editDevice(' + edit + ')"><i class="fa fa-edit" style="color: #dee83b;"></i></button>' +
                            "<button style='border: 0px;background: #1b2a47;' onclick='deleteDevice(" + JSON.parse(data)[i].device.id + ")'><i class='fa fa-trash' style='color:red;'></i></button>" +
                            "</td>" +

                            "</tr>";
                    }
                    else {
                        var kind;
                        if (JSON.parse(data)[i].device.kind_of_device == 1) {
                            kind = "TB CĐ";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 2) {
                            kind = "TB TH";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 3) {
                            var kind = "TB DP";
                        }
                        row += "<tr>" +

                            "<td scope='row'>" + dem + "</td>" +
                            "<td>" + JSON.parse(data)[i].device.code_device + "</td>" +
                            "<td style='text-align:left;'>" + JSON.parse(data)[i].device.device_name + "</td>" +
                            "<td>" + JSON.parse(data)[i].device.quantity + "</td>" +
                            "<td>" + JSON.parse(data)[i].device.price + "</td>" +
                            "<td>" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "</td>" +

                            "<td>" + JSON.parse(data)[i].device.parameter + "</td>" +

                            "<td>" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "</td>" +
                            "<td>" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN : "") + "</td>" +
                            "<td>" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "</td>" +

                            "<td>" + (JSON.parse(data)[i].device.status == 1 ? "OK" : JSON.parse(data)[i].device.status == 2 ? "NG" : "N/A") + "</td>" +

                            "<td>" + (JSON.parse(data)[i].device.calibration != null ? JSON.parse(data)[i].device.calibration : "") + "</td>" +
                            "<td>" + JSON.parse(data)[i].device.create_date + "</td>" +
                            "<td>" + (JSON.parse(data)[i].device.update_date != null ? JSON.parse(data)[i].device.update_date : "") + "</td>" +

                            "<td>" + kind + "</td>" +
                            "<td>" + JSON.parse(data)[i].user_name + "</td>" +
                            "<td>" +
                            '<button style="border: 0px;background: #1b2a47;" onclick="editDevice(' + edit + ')"><i class="fa fa-edit" style="color: #dee83b;"></i></button>' +
                            "<button style='border: 0px;background: #1b2a47;' onclick='deleteDevice(" + JSON.parse(data)[i].device.id + ")'><i class='fa fa-trash' style='color:red;'></i></button>" +
                            "</td>" +

                            "</tr>";
                    }

                    if (JSON.parse(data)[i].device.kind_of_device == 1) {
                        dem1++;
                        var kind;
                        if (JSON.parse(data)[i].device.kind_of_device == 1) {
                            kind = "TB CĐ";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 2) {
                            kind = "TB TH";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 3) {
                            var kind = "TB DP";
                        }
                        if (JSON.parse(data)[i].device.quantity <= JSON.parse(data)[i].device.gioihan) {
                            row1 += "<tr class='animation' style='background-color:#e6333394;'>" +

                                "<td scope='row'>" + dem1 + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.code_device + "</td>" +
                                "<td style='text-align:left;'>" + JSON.parse(data)[i].device.device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.quantity + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.price + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "</td>" +

                                "<td>" + JSON.parse(data)[i].device.parameter + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.status == 1 ? "OK" : JSON.parse(data)[i].device.status == 2 ? "NG" : "N/A") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.calibration != null ? JSON.parse(data)[i].device.calibration : "") + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.create_date + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.update_date != null ? JSON.parse(data)[i].device.update_date : "") + "</td>" +

                                "<td>" + kind + "</td>" +
                                "<td>" + JSON.parse(data)[i].user_name + "</td>" +
                                "<td>" +
                                '<button style="border: 0px;background: #1b2a47;" onclick="editDevice(' + edit + ')"><i class="fa fa-edit" style="color: #dee83b;"></i></button>' +
                                "<button style='border: 0px;background: #1b2a47;' onclick='deleteDevice(" + JSON.parse(data)[i].device.id + ")'><i class='fa fa-trash' style='color:red;'></i></button>" +
                                "</td>" +

                                "</tr>";
                        }
                        else {
                            var kind;
                            if (JSON.parse(data)[i].device.kind_of_device == 1) {
                                kind = "TB CĐ";
                            } else if (JSON.parse(data)[i].device.kind_of_device == 2) {
                                kind = "TB TH";
                            } else if (JSON.parse(data)[i].device.kind_of_device == 3) {
                                var kind = "TB DP";
                            }
                            row1 += "<tr>" +

                                "<td scope='row'>" + dem1 + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.code_device + "</td>" +
                                "<td style='text-align:left;'>" + JSON.parse(data)[i].device.device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.quantity + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.price + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "</td>" +

                                "<td>" + JSON.parse(data)[i].device.parameter + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.status == 1 ? "OK" : JSON.parse(data)[i].device.status == 2 ? "NG" : "N/A") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.calibration != null ? JSON.parse(data)[i].device.calibration : "") + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.create_date + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.update_date != null ? JSON.parse(data)[i].device.update_date : "") + "</td>" +

                                "<td>" + kind + "</td>" +
                                "<td>" + JSON.parse(data)[i].user_name + "</td>" +
                                "<td>" +
                                '<button style="border: 0px;background: #1b2a47;" onclick="editDevice(' + edit + ')"><i class="fa fa-edit" style="color: #dee83b;"></i></button>' +
                                "<button style='border: 0px;background: #1b2a47;' onclick='deleteDevice(" + JSON.parse(data)[i].device.id + ")'><i class='fa fa-trash' style='color:red;'></i></button>" +
                                "</td>" +

                                "</tr>";
                        }

                    }
                    if (JSON.parse(data)[i].device.kind_of_device == 2) {
                        dem2++;
                        var kind;
                        if (JSON.parse(data)[i].device.kind_of_device == 1) {
                            kind = "TB CĐ";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 2) {
                            kind = "TB TH";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 3) {
                            var kind = "TB DP";
                        }
                        if (JSON.parse(data)[i].device.quantity <= JSON.parse(data)[i].device.gioihan) {
                            row2 += "<tr class='animation' style='background-color:#e6333394;'>" +

                                "<td scope='row'>" + dem2 + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.code_device + "</td>" +
                                "<td style='text-align:left;'>" + JSON.parse(data)[i].device.device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.quantity + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.price + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "</td>" +

                                "<td>" + JSON.parse(data)[i].device.parameter + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.status == 1 ? "OK" : JSON.parse(data)[i].device.status == 2 ? "NG" : "N/A") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.calibration != null ? JSON.parse(data)[i].device.calibration : "") + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.create_date + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.update_date != null ? JSON.parse(data)[i].device.update_date : "") + "</td>" +

                                "<td>" + kind + "</td>" +
                                "<td>" + JSON.parse(data)[i].user_name + "</td>" +
                                "<td>" +
                                '<button style="border: 0px;background: #1b2a47;" onclick="editDevice(' + edit + ')"><i class="fa fa-edit" style="color: #dee83b;"></i></button>' +
                                "<button style='border: 0px;background: #1b2a47;' onclick='deleteDevice(" + JSON.parse(data)[i].device.id + ")'><i class='fa fa-trash' style='color:red;'></i></button>" +
                                "</td>" +

                                "</tr>";
                        }
                        else {
                            var kind;
                            if (JSON.parse(data)[i].device.kind_of_device == 1) {
                                kind = "TB CĐ";
                            } else if (JSON.parse(data)[i].device.kind_of_device == 2) {
                                kind = "TB TH";
                            } else if (JSON.parse(data)[i].device.kind_of_device == 3) {
                                var kind = "TB DP";
                            }
                            row2 += "<tr>" +

                                "<td scope='row'>" + dem2 + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.code_device + "</td>" +
                                "<td style='text-align:left;'>" + JSON.parse(data)[i].device.device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.quantity + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.price + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "</td>" +

                                "<td>" + JSON.parse(data)[i].device.parameter + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.status == 1 ? "OK" : JSON.parse(data)[i].device.status == 2 ? "NG" : "N/A") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.calibration != null ? JSON.parse(data)[i].device.calibration : "") + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.create_date + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.update_date != null ? JSON.parse(data)[i].device.update_date : "") + "</td>" +

                                "<td>" + kind + "</td>" +
                                "<td>" + JSON.parse(data)[i].user_name + "</td>" +
                                "<td>" +
                                '<button style="border: 0px;background: #1b2a47;" onclick="editDevice(' + edit + ')"><i class="fa fa-edit" style="color: #dee83b;"></i></button>' +
                                "<button style='border: 0px;background: #1b2a47;' onclick='deleteDevice(" + JSON.parse(data)[i].device.id + ")'><i class='fa fa-trash' style='color:red;'></i></button>" +
                                "</td>" +

                                "</tr>";
                        }

                    }
                    if (JSON.parse(data)[i].device.kind_of_device == 3) {
                        dem3++;
                        var kind;
                        if (JSON.parse(data)[i].device.kind_of_device == 1) {
                            kind = "TB CĐ";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 2) {
                            kind = "TB TH";
                        } else if (JSON.parse(data)[i].device.kind_of_device == 3) {
                            var kind = "TB DP";
                        }
                        if (JSON.parse(data)[i].device.quantity <= JSON.parse(data)[i].device.gioihan) {
                            row3 += "<tr class='animation' style='background-color:#e6333394;'>" +

                                "<td scope='row'>" + dem3 + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.code_device + "</td>" +
                                "<td style='text-align:left;'>" + JSON.parse(data)[i].device.device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.quantity + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.price + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "</td>" +

                                "<td>" + JSON.parse(data)[i].device.parameter + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.status == 1 ? "OK" : JSON.parse(data)[i].device.status == 2 ? "NG" : "N/A") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.calibration != null ? JSON.parse(data)[i].device.calibration : "") + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.create_date + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.update_date != null ? JSON.parse(data)[i].device.update_date : "") + "</td>" +

                                "<td>" + kind + "</td>" +
                                "<td>" + JSON.parse(data)[i].user_name + "</td>" +
                                "<td>" +
                                '<button style="border: 0px;background: #1b2a47;" onclick="editDevice(' + edit + ')"><i class="fa fa-edit" style="color: #dee83b;"></i></button>' +
                                "<button style='border: 0px;background: #1b2a47;' onclick='deleteDevice(" + JSON.parse(data)[i].device.id + ")'><i class='fa fa-trash' style='color:red;'></i></button>" +
                                "</td>" +

                                "</tr>";
                        }
                        else {
                            var kind;
                            if (JSON.parse(data)[i].device.kind_of_device == 1) {
                                kind = "TB CĐ";
                            } else if (JSON.parse(data)[i].device.kind_of_device == 2) {
                                kind = "TB TH";
                            } else if (JSON.parse(data)[i].device.kind_of_device == 3) {
                                var kind = "TB DP";
                            }
                            row3 += "<tr>" +

                                "<td scope='row'>" + dem3 + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.code_device + "</td>" +
                                "<td style='text-align:left;'>" + JSON.parse(data)[i].device.device_name + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.quantity + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.price + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.brand != null ? JSON.parse(data)[i].device.brand : "") + "</td>" +

                                "<td>" + JSON.parse(data)[i].device.parameter + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.unit != null ? JSON.parse(data)[i].device.unit : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.produce_SN != null ? JSON.parse(data)[i].device.produce_SN : "") + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.location != null ? JSON.parse(data)[i].device.location : "") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.status == 1 ? "OK" : JSON.parse(data)[i].device.status == 2 ? "NG" : "N/A") + "</td>" +

                                "<td>" + (JSON.parse(data)[i].device.calibration != null ? JSON.parse(data)[i].device.calibration : "") + "</td>" +
                                "<td>" + JSON.parse(data)[i].device.create_date + "</td>" +
                                "<td>" + (JSON.parse(data)[i].device.update_date != null ? JSON.parse(data)[i].device.update_date : "") + "</td>" +

                                "<td>" + kind + "</td>" +
                                "<td>" + JSON.parse(data)[i].user_name + "</td>" +
                                "<td>" +
                                '<button style="border: 0px;background: #1b2a47;" onclick="editDevice(' + edit + ')"><i class="fa fa-edit" style="color: #dee83b;"></i></button>' +
                                "<button style='border: 0px;background: #1b2a47;' onclick='deleteDevice(" + JSON.parse(data)[i].device.id + ")'><i class='fa fa-trash' style='color:red;'></i></button>" +
                                "</td>" +

                                "</tr>";
                        }
                    }

                }

                $("#tbl_id").append(row);
                $("#tbl1_id").append(row1);
                $("#tbl2_id").append(row2);
                $("#tbl3_id").append(row3);
            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    var modal_Image = document.getElementById("myModal_Image");
    var modal = document.getElementById("myModal");
    var modal_Input = document.getElementById("myModal_Input");
    var create;

    // #region Show modal thêm thiết bị (Chị Ban)
    function open_Modal_Add() {
        create = true;
        $("#code_device").prop("disabled", false);
        $("#code_device").css({ "background-color": "#fff" });
        modal.style.display = "block";
    }
    // #endregion

    function open_Modal_Input() {
        modal_Input.style.display = "block";
    }
    $(document).on("click", ".close", function () {
        modal.style.display = "none";
        modal_Input.style.display = "none";
        modal_Image.style.display = "none";
    })

    // #region Close form nhập thiết bị (Chị Ban)
    //$(document).on("click", ".btnclose", function () {
    //    modal.style.display = "none";
    //    modal_Input.style.display = "none";
    //    modal_Image.style.display = "none";
    //    $("#myModal").find("input,textarea").val('').end().find("input[type=checkbox], input[type=radio]").prop("checked", "").end();
    //})
    // #endregion

    $("#temkiemke").focusout(function () {
        if (create) {
            if ($("#temkiemke").val() != "") {
                var makiemke = document.getElementById("temkiemke").value;
                $.ajax({
                    type: "Post",
                    url: "/Device/Find_TemKiemKe?makiemke=" + makiemke,
                    async: false,
                    contentType: false,
                    processData: false,
                    success: function (data) {
                        if (data == "Co") {
                            alert("Mã kiểm kê này đã tồn tại!");

                            $(".btnclose").prop('disabled', true);
                            $(".btnclose").css({ "background-color": "gray" });
                            $(".btnClick").prop('disabled', true);
                            $(".btnClick").css({ "background-color": "gray" });
                        } else {
                            $(".btnclose").prop('disabled', false);
                            $(".btnclose").css({ "background-color": "white" });
                            $(".btnClick").prop('disabled', false);
                            $(".btnClick").css({ "background-color": "white" });
                        }
                    },
                    error: function (err) {
                        //debugger
                        alert("FAIL!");
                    }
                });
            }
        }
    });

    $("#produce_SN").focusout(function () {
        if (create) {
            if ($("#produce_SN").val() != "") {
                var maSN = document.getElementById("produce_SN").value;
                $.ajax({
                    type: "Post",
                    url: "/Device/Find_SN?maSN=" + maSN,
                    async: false,
                    contentType: false,
                    processData: false,
                    success: function (data) {
                        if (data == "Co") {
                            alert("Mã SN này đã tồn tại!");
                            $(".btnclose").prop('disabled', true);
                            $(".btnclose").css({ "background-color": "gray" });
                            $(".btnClick").prop('disabled', true);
                            $(".btnClick").css({ "background-color": "gray" });
                        } else {
                            $(".btnclose").prop('disabled', false);
                            $(".btnclose").css({ "background-color": "white" });
                            $(".btnClick").prop('disabled', false);
                            $(".btnClick").css({ "background-color": "white" });
                        }
                    },
                    error: function (err) {
                        //debugger
                        alert("FAIL!");
                    }
                });
            }
        }
    });

    $("#calibration").focusout(function () {
        if (create) {
            if ($("#calibration").val() != "") {
                var mahieuchuan = document.getElementById("calibration").value;
                $.ajax({
                    type: "Post",
                    url: "/Device/Find_MaHieuChuan?mahieuchuan=" + mahieuchuan,
                    async: false,
                    contentType: false,
                    processData: false,
                    success: function (data) {
                        if (data == "Co") {
                            alert("Mã Hiệu chuẩn này đã tồn tại!");
                            $(".btnclose").prop('disabled', true);
                            $(".btnclose").css({ "background-color": "gray" });
                            $(".btnClick").prop('disabled', true);
                            $(".btnClick").css({ "background-color": "gray" });
                        } else {
                            $(".btnclose").prop('disabled', false);
                            $(".btnclose").css({ "background-color": "white" });
                            $(".btnClick").prop('disabled', false);
                            $(".btnClick").css({ "background-color": "white" });
                        }
                    },
                    error: function (err) {
                        //debugger
                        alert("FAIL!");
                    }
                });
            }
        }
    });

    function Add_Input() {
        var device_id = document.getElementById("device_name_add").value;
        var order_code;
        if ($(".order_code").val() != "") {
            order_code = $(".order_code").val();
        } else {
            alert("Vui lòng nhập đầu đơn!");
            return;
        }
        var kindOfDevice;
        if ($(".kindOfDevice").val() != 0) {
            kindOfDevice = $(".kindOfDevice").val();
        } else {
            alert("Vui lòng chọn loại Thiết bị!");
            return;
        }
        //var location1;
        //debugger
        //if ($("#location_device option.selected").text() != "Chọn kho") {
        //    location1 = $("#location_device option:selected").text();
        //} else {
        //    alert("Vui lòng chọn kho!");
        //    return;
        //}
        var quantity;
        if ($(".quantity_input").val() != "") {
            quantity = $(".quantity_input").val();
        } else {
            alert("Vui lòng nhập số lượng!");
            return;
        }
        var data = new FormData;
        data.append("quantity", quantity);
        data.append("device_id", device_id);
        data.append("order_code", order_code);
        data.append("kind_of_device", kindOfDevice);
        //data.append("location", location1);

        $.ajax({
            type: "Post",
            url: "/Input/Create_Input",
            data: data,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {
                if (data == "OK") {
                    alert(data);
                    //loadData1();
                    //loadData2();
                    //modal_Input.style.display = "none";
                    location.reload();
                } else {
                    alert(data);
                }

            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });

    }

    // #region Thêm thiết bị (chị Ban)
    function AddDevice() {
        var id;
        if ($("#id_device").val() != "") {
            id = document.getElementById("id_device").value;
        } else {
            id = 0;
        }
        var code_device;
        if ($("#code_device").val() != "") {
            code_device = document.getElementById("code_device").value;
        } else {
            code_device = "";
        }
        if ($("#device_name").val() != "") {
            device_name = document.getElementById("device_name").value;
        } else {
            alert("Vui lòng nhập tên thiết bị!");
            return;
        }

        var quantity;
        if ($("#quantity").val() != "") {
            quantity = document.getElementById("quantity").value;
        } else {
            alert("Vui lòng nhập số lượng TB!");
            return;
        }
        var gioihan;
        if ($("#gioihan").val() != "") {
            gioihan = document.getElementById("gioihan").value;
        } else {
            alert("Vui lòng nhập số lượng giới hạn!");
            return;
        }
        var price;
        if ($("#price").val() != "") {
            price = document.getElementById("price").value;
        } else {
            alert("Vui lòng nhập giá của TB!");
            return;
        }
        var brand;
        if ($("#brand").val() != "") {
            brand = document.getElementById("brand").value;
        } else {
            brand = "";
        }
        var parameter;
        if ($("#parameter").val() != "") {
            parameter = document.getElementById("parameter").value;
        } else {
            alert("Vui lòng nhập quy cách TB!");
            return;
        }
        var unit;
        if ($("#unit").val() != "") {
            unit = document.getElementById("unit").value;
        } else {
            unit = "";
        }
        var kindOfDevice;
        if ($("#kindOfDevice").val() != 0) {
            kindOfDevice = $("#kindOfDevice").val();
            //Nếu là TB cố định thì check SN, Mã hiệu cuẩn, Tem kiểm kê
            if (kindOfDevice == 1) {
                var temkiemke;
                if ($("#temkiemke").val() != "") {
                    temkiemke = document.getElementById("temkiemke").value;
                } else {
                    alert("Vui lòng nhập Tem kiểm kê!");
                    return;
                }
                var produce_SN;
                if ($("#produce_SN").val() != "") {
                    produce_SN = document.getElementById("produce_SN").value;
                } else {
                    alert("Vui lòng nhập Mã SN!");
                    return;
                }

                var calibration;
                if ($("#calibration").val() != "") {
                    calibration = document.getElementById("calibration").value;
                } else {
                    alert("Vui lòng nhập mã Hiệu chuẩn!");
                    return;
                }
            } else {
                var produce_SN;
                if ($("#produce_SN").val() != "") {
                    produce_SN = document.getElementById("produce_SN").value;
                } else {
                    produce_SN = "";
                }
                var temkiemke;
                if ($("#temkiemke").val() != "") {
                    temkiemke = document.getElementById("temkiemke").value;
                } else {
                    temkiemke = "";
                }
                var calibration;
                if ($("#calibration").val() != "") {
                    calibration = document.getElementById("calibration").value;
                } else {
                    calibration = "";
                }
            }
        } else {
            alert("Vui lòng chọn loại TB!");
            return;
        }
        var statusTB;
        if ($("#statusTB").val() != 0) {
            statusTB = $("#statusTB").val();
        } else {
            alert("Vui lòng cho biết tình trạng TB!");
            return;
        }
        var location1;
        if ($("#location").val() != 0) {
            location1 = $("#location option:selected").text();
        } else {
            alert("Vui lòng chọn kho!");
            return;
        }

        var update_date;
        if ($("#update_date").val() != "") {
            update_date = document.getElementById("update_date").value;
        } else {
            update_date = "";
        }

        var manager;
        if ($("#manager").val() != 0) {
            manager = $("#manager").val();
        } else {
            alert("Vui lòng chọn quản lý!");
            return;
        }
        var noteStatus;
        if ($("#noteStatus").val() != 0) {
            noteStatus = $("#noteStatus").val();
        } else {
            noteStatus = "";
        }
        var data = new FormData;
        data.append("id", id);
        data.append("code_device", code_device);
        data.append("gioihan", gioihan);
        data.append("device_name", device_name);
        data.append("manager_id", manager);
        data.append("quantity", quantity);
        data.append("price", price);
        data.append("brand", brand);
        data.append("parameter", parameter);
        data.append("unit", unit);
        data.append("produce_SN", produce_SN);
        data.append("location", location1);
        data.append("calibration", calibration);
        data.append("update_date", update_date);
        data.append("kind_of_device", kindOfDevice);
        data.append("makiemke", temkiemke);
        data.append("status", statusTB);
        data.append("noteStatus", noteStatus);

        $.ajax({
            type: "Post",
            url: "/Device/CreateDevice",
            data: data,
            async: false,
            contentType: false,
            processData: false,
            success: function (data) {

                if (data == "OK") {
                    alert("Thành công!");
                    modal.style.display = "none";
                    $("#tbl_1").empty();
                    $("#tbl_2").empty();
                    $("#tbl_3").empty();
                    $("#tbl_id").empty();
                    $("#tbl1_id").empty();
                    $("#tbl2_id").empty();
                    $("#tbl3_id").empty();
                    //loadData1();
                    //loadData2();
                    location.reload();
                } else {
                    alert(data);
                }

            },
            error: function (err) {
                //debugger
                alert("FAIL!");
            }
        });
    }
    // #endregion

    // #region Sửa thiết bị (chị Ban)
    function editDevice(id, code_device, status, device_name, quantity, gioihan, price, brand, parameter, unit, produce_SN, location, calibration, update_date, kind_of_device, manager_id, makiemke, note_status) {
        $("#id_device").val(id);
        $("#code_device").val(code_device);
        $("#code_device").prop("disabled", true);
        $("#code_device").css({ "background-color": "#d2d2d2" });
        $("#device_name").val(device_name);
        $("#quantity").val(quantity);
        $("#gioihan").val(gioihan);
        $("#price").val(price);
        $("#brand").val(brand);
        $("#parameter").val(parameter);
        $("#unit").val(unit);
        $("#produce_SN").val(produce_SN);
        $("#noteStatus").val(note_status);
        console.log(location)
        $("#location option").filter(function () {
            //may want to use $.trim in here
            return $(this).text() == location;
        }).prop('selected', true);
        //if (location != "") {

        //    //$("#location option:selected").text(location);
        //    $("#location").val(location);
        //} else {
        //    $("#location option:selected").text("Chọn kho");
        //}
        if (status == 1) {
            $("#statusTB option:selected").text("OK");
        } else {
            $("#statusTB option:selected").text("NG");
        }
        $("#statusTB").val(status);
        $("#calibration").val(calibration);
        $("#update_date").val(update_date);
        $("#location option:selected").text(location);
        $("#kindOfDevice").val(kind_of_device);
        $("#manager").val(manager_id);
        $("#temkiemke").val(makiemke);
        modal.style.display = "block";
        create = false;
    }
    // #endregion


    //Delete Project
    function deleteDevice(id) {
        if (confirm("Do you want to delete this row?")) {
            //alert(id_delete);
            $.ajax({
                type: "POST",
                url: "/Device/Delete",
                data: '{id: ' + id + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {

                    alert("Thành công!");
                    $("#tbl_1").empty();
                    $("#tbl_2").empty();
                    $("#tbl_3").empty();
                    $("#tbl_id").empty();
                    $("#tbl1_id").empty();
                    $("#tbl2_id").empty();
                    $("#tbl3_id").empty();
                    //loadData1();
                    //loadData2();
                    location.reload();
                }
            });
        }
    }

    function ViewImage(imageTB, note_status) {
        if (imageTB != "") {
            $("#imageTB").empty();
            $("#note_status").empty();
            var list_image = "";
            var image = JSON.parse(imageTB);
            for (j = 0; j < image.length; j++) {
                list_image += '<a href="/Data/Image/' + image[j].file + '" data-toggle="lightbox" data-max-width="600" >' +
                    '   <img style="width:50%;height:70%;border: 1px solid #2c303a;float:left;" src="/Data/Image/' + image[j].file + '" class="img-fluid">' +
                    '</a>';
            }
            $("#imageTB").append(list_image);
            $("#note_status").append(note_status);
            modal_Image.style.display = "block";
        } else {
            alert("TB này k có hình ảnh!");
        }
    }



</script>

<!-- Jquery validate -->
<script src="~/Assets/CustumByDejan/library/jQuery-Validation/jquery.validate.min.js"></script>
<!-- Sweet alert 2 -->
<script src="~/Assets/CustumByDejan/library/SweetAlert2/sweetalert2.all.min.js?v=@Guid.NewGuid()"></script>


<script src="~/Assets/CustumByDejan/StaffPage.js?v=@Guid.NewGuid();"></script>